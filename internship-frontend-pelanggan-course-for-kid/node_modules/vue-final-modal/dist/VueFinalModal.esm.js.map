{"version":3,"file":"VueFinalModal.esm.js","sources":["../lib/utils/focusTrap.js","../lib/utils/dragResize.js","../lib/utils/bodyScrollLock.js","../lib/VueFinalModal.vue","../lib/VueFinalModal.vue?vue&type=template&id=2836fdb5&lang.js","../node_modules/style-inject/dist/style-inject.es.js","../lib/ModalsContainer.vue","../lib/ModalsContainer.vue?vue&type=template&id=74d49173&lang.js","../lib/PluginCore.js","../lib/Plugin.js"],"sourcesContent":["// stolen from vue-js-modal\n\nconst FOCUSABLE_ELEMENTS_QUERY =\n  'button:not([disabled]), ' +\n  'select:not([disabled]), ' +\n  'a[href]:not([disabled]), ' +\n  'area[href]:not([disabled]), ' +\n  '[contentEditable=\"\"]:not([disabled]), ' +\n  '[contentEditable=\"true\"]:not([disabled]), ' +\n  '[contentEditable=\"TRUE\"]:not([disabled]), ' +\n  'textarea:not([disabled]), ' +\n  'iframe:not([disabled]), ' +\n  'input:not([disabled]), ' +\n  'summary:not([disabled]), ' +\n  '[tabindex]:not([tabindex=\"-1\"])'\n\nconst isTabPressed = event => {\n  return event.key === 'Tab' || event.keyCode === 9\n}\n\nconst querySelectorAll = (element, selector) => {\n  return [...(element.querySelectorAll(selector) || [])]\n}\n\nconst queryFocusableElements = element => {\n  return querySelectorAll(element, FOCUSABLE_ELEMENTS_QUERY)\n}\n\nconst isFocused = element => {\n  return element == document.activeElement\n}\n\nconst isNothingFocused = () => {\n  return !document.activeElement\n}\n\nclass FocusTrap {\n  constructor() {\n    this.root = null\n    this.elements = []\n\n    this.onKeyDown = this.onKeyDown.bind(this)\n    this.enable = this.enable.bind(this)\n    this.disable = this.disable.bind(this)\n    this.firstElement = this.firstElement.bind(this)\n    this.lastElement = this.lastElement.bind(this)\n  }\n\n  lastElement() {\n    return this.elements[this.elements.length - 1] || null\n  }\n\n  firstElement() {\n    return this.elements[0] || null\n  }\n\n  onKeyDown(event) {\n    if (!isTabPressed(event)) {\n      return\n    }\n\n    // SHIFT + TAB\n    if (event.shiftKey) {\n      if (isFocused(this.firstElement())) {\n        this.lastElement().focus()\n        event.preventDefault()\n      }\n      return\n    }\n\n    // TAB\n    if (isNothingFocused() || isFocused(this.lastElement())) {\n      this.firstElement().focus()\n      event.preventDefault()\n      return\n    }\n  }\n\n  enabled() {\n    return !!this.root\n  }\n\n  enable(root) {\n    if (!root) {\n      return\n    }\n\n    this.root = root\n    this.elements = queryFocusableElements(this.root)\n\n    this.root.addEventListener('keydown', this.onKeyDown)\n  }\n\n  disable() {\n    this.root.removeEventListener('keydown', this.onKeyDown)\n    this.root = null\n  }\n}\n\nexport default FocusTrap\n","export const setStyle = (el, key, value) => {\n  const cacheStyle = el.style[key]\n  el.style[key] = value\n  return () => {\n    el.style[key] = cacheStyle\n  }\n}\n\nexport const getPosition = e => {\n  const { clientX: x, clientY: y } = e.targetTouches ? e.targetTouches[0] : e\n  return { x, y }\n}\n\nexport const capitalize = s => {\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport const clamp = (min, num, max) => {\n  if (typeof min !== 'number') {\n    min = Math.min(num, max) || num\n  }\n  if (typeof max !== 'number') {\n    max = Math.max(num, min)\n  }\n  return Math.min(Math.max(num, min), max)\n}\n\nexport const trimPx = distance => {\n  return (distance && Number(distance.replace(/px$/, ''))) || 0\n}\n\nexport const validDragElement = (e, el, dragSelector) => {\n  if (dragSelector === '') return true\n  const list = [...el.querySelectorAll(dragSelector)]\n  return list.includes(e.target)\n}\n\nconst pointerType = {\n  down: {\n    pc: 'mousedown',\n    m: 'touchstart'\n  },\n  move: {\n    pc: 'mousemove',\n    m: 'touchmove'\n  },\n  up: {\n    pc: 'mouseup',\n    m: 'touchend'\n  }\n}\nexport const addListener = (type, el, callback) => {\n  el && el.addEventListener(pointerType[type].pc, callback)\n  el && el.addEventListener(pointerType[type].m, callback, { passive: false })\n}\nexport const removeListener = (type, el, callback) => {\n  el && el.removeEventListener(pointerType[type].pc, callback)\n  el && el.removeEventListener(pointerType[type].m, callback)\n}\n","// stolen from body-scroll-lock\n\n// Older browsers don't support event options, feature detect it.\nlet hasPassiveEvents = false\nif (typeof window !== 'undefined') {\n  const passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true\n      return undefined\n    }\n  }\n  window.addEventListener('testPassive', null, passiveTestOptions)\n  window.removeEventListener('testPassive', null, passiveTestOptions)\n}\n\nconst isIosDevice =\n  typeof window !== 'undefined' &&\n  window.navigator &&\n  window.navigator.platform &&\n  (/iP(ad|hone|od)/.test(window.navigator.platform) ||\n    (window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1))\n\nlet locks = []\nlet documentListenerAdded = false\nlet clientY = 0\nlet initialClientY = -1\nlet previousBodyOverflowSetting\nlet previousBodyPaddingRight\n\nconst hasScrollbar = el => {\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n  const style = window.getComputedStyle(el)\n  return ['auto', 'scroll'].includes(style.overflowY) && el.scrollHeight > el.clientHeight\n}\n\nconst shouldScroll = (el, delta) => {\n  if (el.scrollTop === 0 && delta < 0) return false\n  if (el.scrollTop + el.clientHeight + delta >= el.scrollHeight && delta > 0) return false\n  return true\n}\n\nconst composedPath = el => {\n  const path = []\n  while (el) {\n    path.push(el)\n    if (el.classList.contains('vfm')) return path\n    el = el.parentElement\n  }\n  return path\n}\n\nconst hasAnyScrollableEl = (el, delta) => {\n  let hasAnyScrollableEl = false\n  const path = composedPath(el)\n  path.forEach(el => {\n    if (hasScrollbar(el) && shouldScroll(el, delta)) {\n      hasAnyScrollableEl = true\n    }\n  })\n  return hasAnyScrollableEl\n}\n\n// returns true if `el` should be allowed to receive touchmove events.\nconst allowTouchMove = el => locks.some(() => hasAnyScrollableEl(el, -clientY))\n\nconst preventDefault = rawEvent => {\n  const e = rawEvent || window.event\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true\n  }\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true\n\n  if (e.preventDefault) e.preventDefault()\n\n  return false\n}\n\nconst setOverflowHidden = options => {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    const reserveScrollBarGap = !!options && options.reserveScrollBarGap === true\n    const scrollBarGap = window.innerWidth - document.documentElement.clientWidth\n\n    if (reserveScrollBarGap && scrollBarGap > 0) {\n      const computedBodyPaddingRight = parseInt(getComputedStyle(document.body).getPropertyValue('padding-right'), 10)\n      previousBodyPaddingRight = document.body.style.paddingRight\n      document.body.style.paddingRight = `${computedBodyPaddingRight + scrollBarGap}px`\n    }\n  }\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow\n    document.body.style.overflow = 'hidden'\n  }\n}\n\nconst restoreOverflowSetting = () => {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined\n  }\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nconst isTargetElementTotallyScrolled = targetElement =>\n  targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false\n\nconst handleScroll = (event, targetElement) => {\n  clientY = event.targetTouches[0].clientY - initialClientY\n\n  if (allowTouchMove(event.target)) {\n    return false\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event)\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event)\n  }\n\n  event.stopPropagation()\n  return true\n}\n\nexport const disableBodyScroll = (targetElement, options) => {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error(\n      'disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.'\n    )\n    return\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(lock => lock.targetElement === targetElement)) {\n    return\n  }\n\n  const lock = {\n    targetElement,\n    options: options || {}\n  }\n\n  locks = [...locks, lock]\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = event => {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY\n      }\n    }\n    targetElement.ontouchmove = event => {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement)\n      }\n    }\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined)\n      documentListenerAdded = true\n    }\n  } else {\n    setOverflowHidden(options)\n  }\n}\n\nexport const enableBodyScroll = targetElement => {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error(\n      'enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.'\n    )\n    return\n  }\n\n  locks = locks.filter(lock => lock.targetElement !== targetElement)\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null\n    targetElement.ontouchmove = null\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined)\n      documentListenerAdded = false\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting()\n  }\n}\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown.esc=\"onEsc\"\n  >\n    <transition\n      v-bind=\"computedOverlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      v-bind=\"computedTransition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @mouseup.self=\"onMouseupContainer\"\n        @mousedown.self=\"onMousedown\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"bindContentStyle\"\n          @mousedown=\"onMousedown(null)\"\n        >\n          <slot :params=\"params\" :close=\"() => $emit('update:modelValue', false)\" />\n          <div\n            v-if=\"visibility.resize && visibility.modal\"\n            ref=\"vfmResize\"\n            class=\"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n          >\n            <div\n              v-for=\"direction in resizeDirections\"\n              :key=\"direction\"\n              :direction=\"direction\"\n              :class=\"`vfm--resize-${direction}`\"\n              class=\"vfm--absolute vfm--prevent-auto\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable vue/no-mutating-props */\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport {\n  setStyle,\n  getPosition,\n  capitalize,\n  clamp,\n  trimPx,\n  validDragElement,\n  addListener,\n  removeListener\n} from './utils/dragResize.js'\nimport { disableBodyScroll, enableBodyScroll } from './utils/bodyScrollLock'\n\nconst noop = () => {}\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nconst resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [Object, Array], default: () => ({}) },\n    overlayStyle: { type: [Object, Array], default: () => ({}) },\n    contentStyle: { type: [Object, Array], default: () => ({}) },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: [String, Object], default: 'vfm' },\n    overlayTransition: { type: [String, Object], default: 'vfm' },\n    keepOverlay: { type: Boolean, default: false },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false },\n    fitParent: { type: Boolean, default: true },\n    drag: { type: Boolean, default: false },\n    dragSelector: { type: String, default: '' },\n    keepChangedStyle: { type: Boolean, default: false },\n    resize: {\n      type: Boolean,\n      default: false\n    },\n    resizeDirections: {\n      type: Array,\n      default: () => ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'],\n      validator: val =>\n        ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(value => val.indexOf(value) !== -1).length === val.length\n    },\n    minWidth: { type: Number, default: 0 },\n    minHeight: { type: Number, default: 0 },\n    maxWidth: { type: Number, default: Infinity },\n    maxHeight: { type: Number, default: Infinity }\n  },\n  emits: [\n    'update:modelValue',\n    'click-outside',\n    'before-open',\n    'opened',\n    'before-close',\n    'closed',\n    '_before-open',\n    '_opened',\n    '_closed',\n    'drag:start',\n    'drag:move',\n    'drag:end',\n    'resize:start',\n    'resize:move',\n    'resize:end'\n  ],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContainer = ref(null)\n    const vfmContent = ref(null)\n    const vfmResize = ref(null)\n    const vfmOverlayTransition = ref(null)\n    const vfmTransition = ref(null)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n    const _stopEvent = ref(false)\n    const params = ref({})\n    const dragResizeStyle = ref({})\n    const _state = ref(null)\n    const lastMousedownEl = ref(null)\n\n    let resolveToggle = noop\n    let rejectToggle = noop\n\n    const computedOverlayTransition = computed(() => {\n      if (typeof props.overlayTransition === 'string') return { name: props.overlayTransition }\n      return { ...props.overlayTransition }\n    })\n\n    const computedTransition = computed(() => {\n      if (typeof props.transition === 'string') return { name: props.transition }\n      return { ...props.transition }\n    })\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        } else {\n          return false\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    const bindStyle = computed(() => {\n      return {\n        ...(calculateZIndex.value !== false && {\n          zIndex: calculateZIndex.value\n        })\n      }\n    })\n\n    const bindContentStyle = computed(() => {\n      let style = [dragResizeStyle.value]\n      Array.isArray(props.contentStyle) ? style.push(...props.contentStyle) : style.push(props.contentStyle)\n      return style\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        if (_stopEvent.value) {\n          _stopEvent.value = false\n          return\n        }\n        mounted()\n        if (!value) {\n          if (emitEvent('before-close', true)) {\n            rejectToggle('hide')\n            return\n          }\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n          vfmContainer.value.style.display = 'none'\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n    watch(\n      () => props.drag,\n      val => {\n        if (visible.value) {\n          val ? addDragDown() : removeDragDown()\n        }\n      }\n    )\n    watch(\n      () => props.resize,\n      val => {\n        if (visible.value) {\n          val ? addResizeDown() : removeResizeDown()\n        }\n      }\n    )\n    watch(\n      () => props.keepChangedStyle,\n      val => {\n        if (!val) {\n          dragResizeStyle.value = {}\n        }\n      }\n    )\n\n    onMounted(() => {\n      props.api.modals.push(getModalInfo())\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value)\n      root?.value?.remove()\n\n      let index = props.api.modals.findIndex(vm => vm.uid === uid)\n\n      props.api.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        props,\n        emit,\n        vfmContainer,\n        vfmContent,\n        vfmResize,\n        vfmOverlayTransition,\n        vfmTransition,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        $focusTrap,\n        toggle,\n        params\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({ type: '_before-open' }))\n        if (emitEvent('before-open', false)) {\n          rejectToggle('show')\n          return\n        }\n\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value)\n            } else {\n              visible.value = true\n              nextTick(() => {\n                mounted()\n              })\n              return\n            }\n          }\n\n          let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            props.api.openedModals.splice(index, 1)\n          }\n          props.api.openedModals.push(getModalInfo())\n\n          modalStackIndex.value = props.api.openedModals.length - 1\n\n          handleLockScroll()\n\n          props.api.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                !vm.props.keepOverlay && (vm.visibility.overlay = false)\n              }\n            })\n\n          visible.value = true\n          startTransitionEnter()\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        props.api.openedModals.splice(index, 1)\n      }\n      if (props.api.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = props.api.openedModals[props.api.openedModals.length - 1]\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      props.drag && removeDragDown()\n      props.resize && removeResizeDown()\n      _state.value = null\n\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(() => {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            })\n          } else {\n            enableBodyScroll(vfmContainer.value)\n          }\n        })\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value)\n      props.drag && addDragDown()\n      props.resize && addResizeDown()\n\n      emit('_opened')\n      emit('opened', createModalEvent({ type: 'opened' }))\n      resolveToggle('show')\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      props.lockScroll && enableBodyScroll(vfmContainer.value)\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {}\n      }\n\n      let stopEvent = false\n      const event = createModalEvent({\n        type: 'closed',\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit('_closed')\n      emit('closed', event)\n      resolveToggle('hide')\n      if (stopEvent) return\n      params.value = {}\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e?.target\n    }\n    function onMouseupContainer() {\n      // skip when the lastMousedownEl didn't equal vfmContainer\n      if (lastMousedownEl.value !== vfmContainer.value) return\n      // skip when state equal 'resize:move'\n      if (_state.value === 'resize:move') return\n      emit('click-outside', createModalEvent({ type: 'click-outside' }))\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    function createModalEvent(eventProps = {}) {\n      return {\n        ref: getModalInfo(),\n        ...eventProps\n      }\n    }\n    function emitEvent(eventType, value) {\n      let stopEvent = false\n      const event = createModalEvent({\n        type: eventType,\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit(eventType, event)\n      if (stopEvent) {\n        _stopEvent.value = true\n        nextTick(() => {\n          emit('update:modelValue', value)\n        })\n        return true\n      }\n      return false\n    }\n    function emitState(e, state, action) {\n      _state.value = `${state}:${action}`\n      emit(_state.value, e)\n    }\n    function toggle(show, _params) {\n      return new Promise((resolve, reject) => {\n        resolveToggle = res => {\n          resolve(res)\n          resolveToggle = noop\n        }\n        rejectToggle = err => {\n          reject(err)\n          rejectToggle = noop\n        }\n        const value = typeof show === 'boolean' ? show : !props.modelValue\n        if (value && arguments.length === 2) {\n          params.value = _params\n        }\n        emit('update:modelValue', value)\n      })\n    }\n    function pointerDown(e) {\n      e.stopPropagation()\n      const STATE_RESIZE = 'resize'\n      const STATE_DRAG = 'drag'\n      const direction = e.target.getAttribute('direction')\n      let state\n      if (direction) {\n        state = STATE_RESIZE\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG\n      } else {\n        return\n      }\n      emitState(e, state, 'start')\n      const down = getPosition(e)\n      const rectContainer = vfmContainer.value.getBoundingClientRect()\n      const rectContent = vfmContent.value.getBoundingClientRect()\n      const isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute'\n      const position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      }\n      const limit = (() => {\n        if (props.fitParent) {\n          const limit = {\n            absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              }\n            },\n            relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              }\n            }\n          }\n          return isAbsolute ? limit.absolute() : limit.relative()\n        } else {\n          return {}\n        }\n      })()\n      const resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction])\n\n      const moving = e => {\n        // onPointerMove\n        e.stopPropagation()\n        emitState(e, state, 'move')\n        const move = getPosition(e)\n        let offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        }\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute)\n        }\n\n        let top\n        let left\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y\n          left = rectContent.left - rectContainer.left + offset.x\n        } else {\n          top = position.top + offset.y\n          left = position.left + offset.x\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop)\n          left = clamp(limit.minLeft, left, limit.maxLeft)\n        }\n        const style = {\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none',\n          ...(isAbsolute && {\n            position: 'absolute',\n            transform: 'unset',\n            width: rectContent.width + 'px',\n            height: rectContent.height + 'px'\n          }),\n          ...(offset.width && { width: offset.width + 'px' }),\n          ...(offset.height && { height: offset.height + 'px' })\n        }\n\n        dragResizeStyle.value = {\n          ...dragResizeStyle.value,\n          ...style\n        }\n      }\n      const end = e => {\n        // onPointerUp\n        e.stopPropagation()\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor()\n        }\n        // Excute onMouseupContainer before trigger emitState\n        setTimeout(() => {\n          emitState(e, state, 'end')\n        })\n        removeListener('move', document, moving)\n        removeListener('up', document, end)\n      }\n      addListener('move', document, moving)\n      addListener('up', document, end)\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown)\n      dragResizeStyle.value.touchAction = 'none'\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown)\n    }\n    function addResizeDown() {\n      visibility.resize = true\n      nextTick(() => {\n        addListener('down', vfmResize.value, pointerDown)\n      })\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown)\n      visibility.resize = false\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      const setOffset = dir => {\n        let offsetAxis = offset[dir.axis]\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis\n        let edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge)\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute)\n        return {\n          [dir.edgeName]: edge,\n          [dir.axis]: offsetAxis\n        }\n      }\n\n      const getDirectionInfo = (position, edgeName, axis, isPositive) => {\n        const rectContentEdge = rectContent[edgeName]\n        const positionOffset = rectContainer[position] - rectContent[position]\n        const EdgeName = capitalize(edgeName)\n        return {\n          axis,\n          edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[`min${EdgeName}`],\n          maxEdge: props[`max${EdgeName}`],\n          getEdge: offsetAxis => rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1),\n          getOffsetAxis: (edge, isAbsolute) => {\n            const offsetAxis = rectContent[edgeName] - edge\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0\n            } else {\n              return ((isPositive ? 1 : -1) * offsetAxis) / 2\n            }\n          }\n        }\n      }\n\n      const directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      }\n\n      let _offset = { x: 0, y: 0 }\n      direction.split('').forEach(dir => {\n        const directionInfo = getDirectionInfo(...directions[dir])\n        _offset = {\n          ..._offset,\n          ...setOffset(directionInfo)\n        }\n      })\n      return _offset\n    }\n    return {\n      root,\n      vfmContainer,\n      vfmContent,\n      vfmResize,\n      vfmOverlayTransition,\n      vfmTransition,\n      computedOverlayTransition,\n      computedTransition,\n      visible,\n      visibility,\n      params,\n      calculateZIndex,\n      bindStyle,\n      bindContentStyle,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onMousedown,\n      onMouseupContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n\n.vfm--touch-none {\n  touch-action: none;\n}\n.vfm--select-none {\n  user-select: none;\n}\n\n.vfm--resize-tr,\n.vfm--resize-br,\n.vfm--resize-bl,\n.vfm--resize-tl {\n  width: 12px;\n  height: 12px;\n  z-index: 10;\n}\n\n.vfm--resize-t {\n  top: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-tr {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-r {\n  top: 0;\n  right: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-br {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.vfm--resize-b {\n  bottom: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-bl {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-l {\n  top: 0;\n  left: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-tl {\n  top: -6px;\n  left: -6px;\n  cursor: nwse-resize;\n}\n</style>\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown.esc=\"onEsc\"\n  >\n    <transition\n      v-bind=\"computedOverlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      v-bind=\"computedTransition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @mouseup.self=\"onMouseupContainer\"\n        @mousedown.self=\"onMousedown\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"bindContentStyle\"\n          @mousedown=\"onMousedown(null)\"\n        >\n          <slot :params=\"params\" :close=\"() => $emit('update:modelValue', false)\" />\n          <div\n            v-if=\"visibility.resize && visibility.modal\"\n            ref=\"vfmResize\"\n            class=\"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n          >\n            <div\n              v-for=\"direction in resizeDirections\"\n              :key=\"direction\"\n              :direction=\"direction\"\n              :class=\"`vfm--resize-${direction}`\"\n              class=\"vfm--absolute vfm--prevent-auto\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable vue/no-mutating-props */\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport {\n  setStyle,\n  getPosition,\n  capitalize,\n  clamp,\n  trimPx,\n  validDragElement,\n  addListener,\n  removeListener\n} from './utils/dragResize.js'\nimport { disableBodyScroll, enableBodyScroll } from './utils/bodyScrollLock'\n\nconst noop = () => {}\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nconst resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [Object, Array], default: () => ({}) },\n    overlayStyle: { type: [Object, Array], default: () => ({}) },\n    contentStyle: { type: [Object, Array], default: () => ({}) },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: [String, Object], default: 'vfm' },\n    overlayTransition: { type: [String, Object], default: 'vfm' },\n    keepOverlay: { type: Boolean, default: false },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false },\n    fitParent: { type: Boolean, default: true },\n    drag: { type: Boolean, default: false },\n    dragSelector: { type: String, default: '' },\n    keepChangedStyle: { type: Boolean, default: false },\n    resize: {\n      type: Boolean,\n      default: false\n    },\n    resizeDirections: {\n      type: Array,\n      default: () => ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'],\n      validator: val =>\n        ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(value => val.indexOf(value) !== -1).length === val.length\n    },\n    minWidth: { type: Number, default: 0 },\n    minHeight: { type: Number, default: 0 },\n    maxWidth: { type: Number, default: Infinity },\n    maxHeight: { type: Number, default: Infinity }\n  },\n  emits: [\n    'update:modelValue',\n    'click-outside',\n    'before-open',\n    'opened',\n    'before-close',\n    'closed',\n    '_before-open',\n    '_opened',\n    '_closed',\n    'drag:start',\n    'drag:move',\n    'drag:end',\n    'resize:start',\n    'resize:move',\n    'resize:end'\n  ],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContainer = ref(null)\n    const vfmContent = ref(null)\n    const vfmResize = ref(null)\n    const vfmOverlayTransition = ref(null)\n    const vfmTransition = ref(null)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n    const _stopEvent = ref(false)\n    const params = ref({})\n    const dragResizeStyle = ref({})\n    const _state = ref(null)\n    const lastMousedownEl = ref(null)\n\n    let resolveToggle = noop\n    let rejectToggle = noop\n\n    const computedOverlayTransition = computed(() => {\n      if (typeof props.overlayTransition === 'string') return { name: props.overlayTransition }\n      return { ...props.overlayTransition }\n    })\n\n    const computedTransition = computed(() => {\n      if (typeof props.transition === 'string') return { name: props.transition }\n      return { ...props.transition }\n    })\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        } else {\n          return false\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    const bindStyle = computed(() => {\n      return {\n        ...(calculateZIndex.value !== false && {\n          zIndex: calculateZIndex.value\n        })\n      }\n    })\n\n    const bindContentStyle = computed(() => {\n      let style = [dragResizeStyle.value]\n      Array.isArray(props.contentStyle) ? style.push(...props.contentStyle) : style.push(props.contentStyle)\n      return style\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        if (_stopEvent.value) {\n          _stopEvent.value = false\n          return\n        }\n        mounted()\n        if (!value) {\n          if (emitEvent('before-close', true)) {\n            rejectToggle('hide')\n            return\n          }\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n          vfmContainer.value.style.display = 'none'\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n    watch(\n      () => props.drag,\n      val => {\n        if (visible.value) {\n          val ? addDragDown() : removeDragDown()\n        }\n      }\n    )\n    watch(\n      () => props.resize,\n      val => {\n        if (visible.value) {\n          val ? addResizeDown() : removeResizeDown()\n        }\n      }\n    )\n    watch(\n      () => props.keepChangedStyle,\n      val => {\n        if (!val) {\n          dragResizeStyle.value = {}\n        }\n      }\n    )\n\n    onMounted(() => {\n      props.api.modals.push(getModalInfo())\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value)\n      root?.value?.remove()\n\n      let index = props.api.modals.findIndex(vm => vm.uid === uid)\n\n      props.api.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        props,\n        emit,\n        vfmContainer,\n        vfmContent,\n        vfmResize,\n        vfmOverlayTransition,\n        vfmTransition,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        $focusTrap,\n        toggle,\n        params\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({ type: '_before-open' }))\n        if (emitEvent('before-open', false)) {\n          rejectToggle('show')\n          return\n        }\n\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value)\n            } else {\n              visible.value = true\n              nextTick(() => {\n                mounted()\n              })\n              return\n            }\n          }\n\n          let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            props.api.openedModals.splice(index, 1)\n          }\n          props.api.openedModals.push(getModalInfo())\n\n          modalStackIndex.value = props.api.openedModals.length - 1\n\n          handleLockScroll()\n\n          props.api.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                !vm.props.keepOverlay && (vm.visibility.overlay = false)\n              }\n            })\n\n          visible.value = true\n          startTransitionEnter()\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        props.api.openedModals.splice(index, 1)\n      }\n      if (props.api.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = props.api.openedModals[props.api.openedModals.length - 1]\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      props.drag && removeDragDown()\n      props.resize && removeResizeDown()\n      _state.value = null\n\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(() => {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            })\n          } else {\n            enableBodyScroll(vfmContainer.value)\n          }\n        })\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value)\n      props.drag && addDragDown()\n      props.resize && addResizeDown()\n\n      emit('_opened')\n      emit('opened', createModalEvent({ type: 'opened' }))\n      resolveToggle('show')\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      props.lockScroll && enableBodyScroll(vfmContainer.value)\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {}\n      }\n\n      let stopEvent = false\n      const event = createModalEvent({\n        type: 'closed',\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit('_closed')\n      emit('closed', event)\n      resolveToggle('hide')\n      if (stopEvent) return\n      params.value = {}\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e?.target\n    }\n    function onMouseupContainer() {\n      // skip when the lastMousedownEl didn't equal vfmContainer\n      if (lastMousedownEl.value !== vfmContainer.value) return\n      // skip when state equal 'resize:move'\n      if (_state.value === 'resize:move') return\n      emit('click-outside', createModalEvent({ type: 'click-outside' }))\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    function createModalEvent(eventProps = {}) {\n      return {\n        ref: getModalInfo(),\n        ...eventProps\n      }\n    }\n    function emitEvent(eventType, value) {\n      let stopEvent = false\n      const event = createModalEvent({\n        type: eventType,\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit(eventType, event)\n      if (stopEvent) {\n        _stopEvent.value = true\n        nextTick(() => {\n          emit('update:modelValue', value)\n        })\n        return true\n      }\n      return false\n    }\n    function emitState(e, state, action) {\n      _state.value = `${state}:${action}`\n      emit(_state.value, e)\n    }\n    function toggle(show, _params) {\n      return new Promise((resolve, reject) => {\n        resolveToggle = res => {\n          resolve(res)\n          resolveToggle = noop\n        }\n        rejectToggle = err => {\n          reject(err)\n          rejectToggle = noop\n        }\n        const value = typeof show === 'boolean' ? show : !props.modelValue\n        if (value && arguments.length === 2) {\n          params.value = _params\n        }\n        emit('update:modelValue', value)\n      })\n    }\n    function pointerDown(e) {\n      e.stopPropagation()\n      const STATE_RESIZE = 'resize'\n      const STATE_DRAG = 'drag'\n      const direction = e.target.getAttribute('direction')\n      let state\n      if (direction) {\n        state = STATE_RESIZE\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG\n      } else {\n        return\n      }\n      emitState(e, state, 'start')\n      const down = getPosition(e)\n      const rectContainer = vfmContainer.value.getBoundingClientRect()\n      const rectContent = vfmContent.value.getBoundingClientRect()\n      const isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute'\n      const position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      }\n      const limit = (() => {\n        if (props.fitParent) {\n          const limit = {\n            absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              }\n            },\n            relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              }\n            }\n          }\n          return isAbsolute ? limit.absolute() : limit.relative()\n        } else {\n          return {}\n        }\n      })()\n      const resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction])\n\n      const moving = e => {\n        // onPointerMove\n        e.stopPropagation()\n        emitState(e, state, 'move')\n        const move = getPosition(e)\n        let offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        }\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute)\n        }\n\n        let top\n        let left\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y\n          left = rectContent.left - rectContainer.left + offset.x\n        } else {\n          top = position.top + offset.y\n          left = position.left + offset.x\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop)\n          left = clamp(limit.minLeft, left, limit.maxLeft)\n        }\n        const style = {\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none',\n          ...(isAbsolute && {\n            position: 'absolute',\n            transform: 'unset',\n            width: rectContent.width + 'px',\n            height: rectContent.height + 'px'\n          }),\n          ...(offset.width && { width: offset.width + 'px' }),\n          ...(offset.height && { height: offset.height + 'px' })\n        }\n\n        dragResizeStyle.value = {\n          ...dragResizeStyle.value,\n          ...style\n        }\n      }\n      const end = e => {\n        // onPointerUp\n        e.stopPropagation()\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor()\n        }\n        // Excute onMouseupContainer before trigger emitState\n        setTimeout(() => {\n          emitState(e, state, 'end')\n        })\n        removeListener('move', document, moving)\n        removeListener('up', document, end)\n      }\n      addListener('move', document, moving)\n      addListener('up', document, end)\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown)\n      dragResizeStyle.value.touchAction = 'none'\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown)\n    }\n    function addResizeDown() {\n      visibility.resize = true\n      nextTick(() => {\n        addListener('down', vfmResize.value, pointerDown)\n      })\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown)\n      visibility.resize = false\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      const setOffset = dir => {\n        let offsetAxis = offset[dir.axis]\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis\n        let edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge)\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute)\n        return {\n          [dir.edgeName]: edge,\n          [dir.axis]: offsetAxis\n        }\n      }\n\n      const getDirectionInfo = (position, edgeName, axis, isPositive) => {\n        const rectContentEdge = rectContent[edgeName]\n        const positionOffset = rectContainer[position] - rectContent[position]\n        const EdgeName = capitalize(edgeName)\n        return {\n          axis,\n          edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[`min${EdgeName}`],\n          maxEdge: props[`max${EdgeName}`],\n          getEdge: offsetAxis => rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1),\n          getOffsetAxis: (edge, isAbsolute) => {\n            const offsetAxis = rectContent[edgeName] - edge\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0\n            } else {\n              return ((isPositive ? 1 : -1) * offsetAxis) / 2\n            }\n          }\n        }\n      }\n\n      const directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      }\n\n      let _offset = { x: 0, y: 0 }\n      direction.split('').forEach(dir => {\n        const directionInfo = getDirectionInfo(...directions[dir])\n        _offset = {\n          ..._offset,\n          ...setOffset(directionInfo)\n        }\n      })\n      return _offset\n    }\n    return {\n      root,\n      vfmContainer,\n      vfmContent,\n      vfmResize,\n      vfmOverlayTransition,\n      vfmTransition,\n      computedOverlayTransition,\n      computedTransition,\n      visible,\n      visibility,\n      params,\n      calculateZIndex,\n      bindStyle,\n      bindContentStyle,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onMousedown,\n      onMouseupContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n\n.vfm--touch-none {\n  touch-action: none;\n}\n.vfm--select-none {\n  user-select: none;\n}\n\n.vfm--resize-tr,\n.vfm--resize-br,\n.vfm--resize-bl,\n.vfm--resize-tl {\n  width: 12px;\n  height: 12px;\n  z-index: 10;\n}\n\n.vfm--resize-t {\n  top: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-tr {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-r {\n  top: 0;\n  right: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-br {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.vfm--resize-b {\n  bottom: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-bl {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-l {\n  top: 0;\n  left: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-tl {\n  top: -6px;\n  left: -6px;\n  cursor: nwse-resize;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in api.dynamicModals\"\n      :key=\"modal.id\"\n      v-bind=\"modal.bind\"\n      v-model=\"modal.value\"\n      v-on=\"modal.on\"\n      @_closed=\"slice(index)\"\n      @_beforeOpen=\"e => beforeOpen(e, modal)\"\n      @_opened=\"modal.opened\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" #[key] :key=\"key\">\n        <!-- eslint-disable vue/no-v-html -->\n        <div v-if=\"isString(slot)\" v-html=\"slot\"></div>\n        <component :is=\"slot.component\" v-else v-bind=\"slot.bind\" v-on=\"slot.on || {}\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  methods: {\n    slice(index) {\n      this.api.dynamicModals.splice(index, 1)\n    },\n    async beforeOpen(e, modal, index) {\n      e.ref.params.value = modal.params\n      await this.$nextTick()\n      await this.$nextTick()\n      if (!modal.value) {\n        this.slice(index)\n        modal.reject('show')\n      }\n    },\n    isString(val) {\n      return typeof val === 'string'\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in api.dynamicModals\"\n      :key=\"modal.id\"\n      v-bind=\"modal.bind\"\n      v-model=\"modal.value\"\n      v-on=\"modal.on\"\n      @_closed=\"slice(index)\"\n      @_beforeOpen=\"e => beforeOpen(e, modal)\"\n      @_opened=\"modal.opened\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" #[key] :key=\"key\">\n        <!-- eslint-disable vue/no-v-html -->\n        <div v-if=\"isString(slot)\" v-html=\"slot\"></div>\n        <component :is=\"slot.component\" v-else v-bind=\"slot.bind\" v-on=\"slot.on || {}\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  methods: {\n    slice(index) {\n      this.api.dynamicModals.splice(index, 1)\n    },\n    async beforeOpen(e, modal, index) {\n      e.ref.params.value = modal.params\n      await this.$nextTick()\n      await this.$nextTick()\n      if (!modal.value) {\n        this.slice(index)\n        modal.reject('show')\n      }\n    },\n    isString(val) {\n      return typeof val === 'string'\n    }\n  }\n}\n</script>\n","import VueFinalModal from './VueFinalModal.vue'\nimport ModalsContainer from './ModalsContainer.vue'\nimport { shallowReactive } from 'vue'\n\nexport function defineApi() {\n  let _modalComponent = null\n\n  return {\n    show(modal, ...args) {\n      switch (typeof modal) {\n        case 'string':\n          return this.toggle(modal, true, ...args)\n        case 'object': {\n          return Promise.allSettled([\n            new Promise((resolve, reject) => {\n              const defaultModal = {\n                value: true,\n                id: Symbol('dynamicModal'),\n                component: _modalComponent,\n                bind: {},\n                slots: {},\n                on: {},\n                params: args[0],\n                reject,\n                opened() {\n                  resolve('show')\n                }\n              }\n              this.dynamicModals.push(shallowReactive(Object.assign(defaultModal, modal)))\n            })\n          ])\n        }\n      }\n    },\n    hide(...names) {\n      return this.toggle(names, false)\n    },\n    hideAll() {\n      return this.hide(...this.openedModals.map(modal => modal.props.name))\n    },\n    toggle(name, ...args) {\n      const modals = Array.isArray(name) ? this.get(...name) : this.get(name)\n      return Promise.allSettled(modals.map(modal => modal.toggle(...args)))\n    },\n    get(...names) {\n      return this.modals.filter(modal => names.includes(modal.props.name))\n    },\n    dynamicModals: shallowReactive([]),\n    openedModals: [],\n    modals: [],\n    _setDefaultModal(modalComponent) {\n      _modalComponent = modalComponent\n    }\n  }\n}\n\nfunction bindApi(component, api) {\n  const _component = { ...component, props: { ...component.props } }\n  Object.assign(_component.props, {\n    api: { type: Object, default: () => api }\n  })\n  return _component\n}\n\nexport function defineModal(api) {\n  const modalComponent = bindApi(VueFinalModal, api)\n  api._setDefaultModal(modalComponent)\n  return modalComponent\n}\n\nexport function defineContainer(api) {\n  return bindApi(ModalsContainer, api)\n}\n","import { defineApi, defineModal, defineContainer } from './PluginCore'\n\n/**\n * @description Ensure that `_vfm` is used when function `installPlugin` is executed for the first time\n */\nlet _count = 0\n\nconst _key = '$vfm'\nconst _componentName = 'VueFinalModal'\nconst _dynamicContainerName = 'ModalsContainer'\n\n/**\n * @description Support create multiple vfm instance\n */\nexport const defineVfm = () => {\n  let api = defineApi()\n  return {\n    [_key]: api,\n    [_componentName]: defineModal(api),\n    [_dynamicContainerName]: defineContainer(api)\n  }\n}\n\n/**\n * @description Create a vfm instance by default for directly support `import { $vfm, VueFinalModal, ModalsContainer } from 'vue-final-modal'`\n */\nconst _vfm = defineVfm()\nexport const { $vfm, VueFinalModal, ModalsContainer } = _vfm\n\n/**\n * @description Register vfm instance globally\n * @deprecated not available in vue-final-modal 4\n */\nconst installVfm = (App, options = {}) => {\n  const { $vfm, VueFinalModal, ModalsContainer } = _count === 0 ? _vfm : defineVfm()\n  _count += 1\n  const key = options.key || _key\n  const componentName = options.componentName || _componentName\n  const dynamicContainerName = options.dynamicContainerName || _dynamicContainerName\n  Object.defineProperty(App.config.globalProperties, key, {\n    get() {\n      return $vfm\n    }\n  })\n  App.provide(key, $vfm)\n  App.component(componentName, VueFinalModal)\n  App.component(dynamicContainerName, ModalsContainer)\n}\n\n/**\n * @description Vue plugin for register vfm instance globally\n * @deprecated not available in vue-final-modal 4\n */\nexport const vfmPlugin = pluginOptions => ({\n  install(App, options) {\n    const _options = Object.assign({}, pluginOptions, options)\n    installVfm(App, _options)\n  }\n})\n\nvfmPlugin.install = installVfm\n"],"names":["FOCUSABLE_ELEMENTS_QUERY","isTabPressed","event","key","keyCode","querySelectorAll","element","selector","queryFocusableElements","isFocused","document","activeElement","isNothingFocused","FocusTrap","root","elements","onKeyDown","bind","enable","disable","firstElement","lastElement","length","shiftKey","focus","preventDefault","addEventListener","removeEventListener","setStyle","el","value","cacheStyle","style","getPosition","e","targetTouches","x","clientX","y","clientY","capitalize","s","charAt","toUpperCase","slice","clamp","min","num","max","Math","trimPx","distance","Number","replace","validDragElement","dragSelector","list","includes","target","pointerType","down","pc","m","move","up","addListener","type","callback","passive","removeListener","hasPassiveEvents","window","passiveTestOptions","undefined","isIosDevice","navigator","platform","test","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","hasScrollbar","nodeType","Node","ELEMENT_NODE","getComputedStyle","overflowY","scrollHeight","clientHeight","shouldScroll","delta","scrollTop","composedPath","path","push","classList","contains","parentElement","hasAnyScrollableEl","forEach","allowTouchMove","some","rawEvent","touches","setOverflowHidden","options","reserveScrollBarGap","scrollBarGap","innerWidth","documentElement","clientWidth","computedBodyPaddingRight","parseInt","body","getPropertyValue","paddingRight","overflow","restoreOverflowSetting","isTargetElementTotallyScrolled","targetElement","handleScroll","stopPropagation","disableBodyScroll","console","error","lock","ontouchstart","ontouchmove","enableBodyScroll","filter","noop","TransitionState","Enter","Entering","Leave","Leaving","resizeCursor","t","tr","r","br","b","bl","l","tl","props","name","String","modelValue","Boolean","ssr","classes","Object","Array","overlayClass","contentClass","styles","overlayStyle","contentStyle","lockScroll","hideOverlay","clickToClose","escToClose","preventClick","attach","validator","val","transition","overlayTransition","keepOverlay","zIndexAuto","zIndexBase","zIndex","focusRetain","focusTrap","fitParent","drag","keepChangedStyle","resize","resizeDirections","indexOf","minWidth","minHeight","maxWidth","Infinity","maxHeight","emits","setup","emit","uid","Symbol","ref","vfmContainer","vfmContent","vfmResize","vfmOverlayTransition","vfmTransition","modalStackIndex","$focusTrap","visible","visibility","reactive","modal","overlay","overlayTransitionState","modalTransitionState","_stopEvent","params","dragResizeStyle","_state","lastMousedownEl","resolveToggle","rejectToggle","computedOverlayTransition","computed","computedTransition","isComponentReadyToBeDestroyed","calculateZIndex","bindStyle","bindContentStyle","isArray","watch","mounted","emitEvent","close","handleLockScroll","display","flush","addDragDown","removeDragDown","addResizeDown","removeResizeDown","onMounted","api","modals","getModalInfo","onBeforeUnmount","remove","index","findIndex","vm","splice","getAttachElement","toggle","createModalEvent","appendChild","nextTick","openedModals","startTransitionEnter","warn","concat","$_vm","startTransitionLeave","querySelector","beforeOverlayEnter","afterOverlayEnter","beforeOverlayLeave","afterOverlayLeave","beforeModalEnter","afterModalEnter","beforeModalLeave","enabled","afterModalLeave","stopEvent","stop","onMousedown","onMouseupContainer","onEsc","eventProps","eventType","emitState","state","action","show","_params","Promise","resolve","reject","res","err","arguments","pointerDown","STATE_RESIZE","STATE_DRAG","direction","getAttribute","rectContainer","getBoundingClientRect","rectContent","isAbsolute","position","top","left","limit","absolute","minTop","minLeft","maxTop","height","maxLeft","width","relative","bottom","right","resetBodyCursor","moving","offset","getResizeOffset","margin","touchAction","transform","end","setTimeout","setOffset","dir","offsetAxis","axis","edge","minEdge","getEdge","maxEdge","getOffsetAxis","edgeName","getDirectionInfo","isPositive","rectContentEdge","positionOffset","EdgeName","directions","_offset","split","directionInfo","$props","$setup","_createBlock","onKeydown","_createVNode","_mergeProps","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave","toString","role","tabindex","onMouseup","_renderSlot","_ctx","_hoisted_1","styleInject","css","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","styleSheet","cssText","createTextNode","methods","dynamicModals","beforeOpen","$nextTick","isString","component","id","_toHandlers","on","on_closed","$options","on_beforeOpen","on_opened","opened","slots","slot","_createCommentVNode","innerHTML","defineApi","_modalComponent","args","allSettled","defaultModal","shallowReactive","assign","hide","names","hideAll","map","get","_setDefaultModal","modalComponent","bindApi","_component","defineModal","VueFinalModal","defineContainer","ModalsContainer","_count","_key","_componentName","_dynamicContainerName","defineVfm","_vfm","$vfm","installVfm","App","componentName","dynamicContainerName","defineProperty","config","globalProperties","provide","vfmPlugin","pluginOptions","install","_options"],"mappings":"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"}