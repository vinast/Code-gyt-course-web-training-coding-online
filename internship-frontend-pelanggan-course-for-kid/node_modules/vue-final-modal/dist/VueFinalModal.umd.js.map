{"version":3,"file":"VueFinalModal.umd.js","sources":["../lib/utils/focusTrap.js","../lib/utils/dragResize.js","../lib/utils/bodyScrollLock.js","../lib/VueFinalModal.vue","../lib/VueFinalModal.vue?vue&type=template&id=2836fdb5&lang.js","../node_modules/style-inject/dist/style-inject.es.js","../lib/ModalsContainer.vue","../lib/ModalsContainer.vue?vue&type=template&id=74d49173&lang.js","../lib/PluginCore.js","../lib/Plugin.js"],"sourcesContent":["// stolen from vue-js-modal\n\nconst FOCUSABLE_ELEMENTS_QUERY =\n  'button:not([disabled]), ' +\n  'select:not([disabled]), ' +\n  'a[href]:not([disabled]), ' +\n  'area[href]:not([disabled]), ' +\n  '[contentEditable=\"\"]:not([disabled]), ' +\n  '[contentEditable=\"true\"]:not([disabled]), ' +\n  '[contentEditable=\"TRUE\"]:not([disabled]), ' +\n  'textarea:not([disabled]), ' +\n  'iframe:not([disabled]), ' +\n  'input:not([disabled]), ' +\n  'summary:not([disabled]), ' +\n  '[tabindex]:not([tabindex=\"-1\"])'\n\nconst isTabPressed = event => {\n  return event.key === 'Tab' || event.keyCode === 9\n}\n\nconst querySelectorAll = (element, selector) => {\n  return [...(element.querySelectorAll(selector) || [])]\n}\n\nconst queryFocusableElements = element => {\n  return querySelectorAll(element, FOCUSABLE_ELEMENTS_QUERY)\n}\n\nconst isFocused = element => {\n  return element == document.activeElement\n}\n\nconst isNothingFocused = () => {\n  return !document.activeElement\n}\n\nclass FocusTrap {\n  constructor() {\n    this.root = null\n    this.elements = []\n\n    this.onKeyDown = this.onKeyDown.bind(this)\n    this.enable = this.enable.bind(this)\n    this.disable = this.disable.bind(this)\n    this.firstElement = this.firstElement.bind(this)\n    this.lastElement = this.lastElement.bind(this)\n  }\n\n  lastElement() {\n    return this.elements[this.elements.length - 1] || null\n  }\n\n  firstElement() {\n    return this.elements[0] || null\n  }\n\n  onKeyDown(event) {\n    if (!isTabPressed(event)) {\n      return\n    }\n\n    // SHIFT + TAB\n    if (event.shiftKey) {\n      if (isFocused(this.firstElement())) {\n        this.lastElement().focus()\n        event.preventDefault()\n      }\n      return\n    }\n\n    // TAB\n    if (isNothingFocused() || isFocused(this.lastElement())) {\n      this.firstElement().focus()\n      event.preventDefault()\n      return\n    }\n  }\n\n  enabled() {\n    return !!this.root\n  }\n\n  enable(root) {\n    if (!root) {\n      return\n    }\n\n    this.root = root\n    this.elements = queryFocusableElements(this.root)\n\n    this.root.addEventListener('keydown', this.onKeyDown)\n  }\n\n  disable() {\n    this.root.removeEventListener('keydown', this.onKeyDown)\n    this.root = null\n  }\n}\n\nexport default FocusTrap\n","export const setStyle = (el, key, value) => {\n  const cacheStyle = el.style[key]\n  el.style[key] = value\n  return () => {\n    el.style[key] = cacheStyle\n  }\n}\n\nexport const getPosition = e => {\n  const { clientX: x, clientY: y } = e.targetTouches ? e.targetTouches[0] : e\n  return { x, y }\n}\n\nexport const capitalize = s => {\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nexport const clamp = (min, num, max) => {\n  if (typeof min !== 'number') {\n    min = Math.min(num, max) || num\n  }\n  if (typeof max !== 'number') {\n    max = Math.max(num, min)\n  }\n  return Math.min(Math.max(num, min), max)\n}\n\nexport const trimPx = distance => {\n  return (distance && Number(distance.replace(/px$/, ''))) || 0\n}\n\nexport const validDragElement = (e, el, dragSelector) => {\n  if (dragSelector === '') return true\n  const list = [...el.querySelectorAll(dragSelector)]\n  return list.includes(e.target)\n}\n\nconst pointerType = {\n  down: {\n    pc: 'mousedown',\n    m: 'touchstart'\n  },\n  move: {\n    pc: 'mousemove',\n    m: 'touchmove'\n  },\n  up: {\n    pc: 'mouseup',\n    m: 'touchend'\n  }\n}\nexport const addListener = (type, el, callback) => {\n  el && el.addEventListener(pointerType[type].pc, callback)\n  el && el.addEventListener(pointerType[type].m, callback, { passive: false })\n}\nexport const removeListener = (type, el, callback) => {\n  el && el.removeEventListener(pointerType[type].pc, callback)\n  el && el.removeEventListener(pointerType[type].m, callback)\n}\n","// stolen from body-scroll-lock\n\n// Older browsers don't support event options, feature detect it.\nlet hasPassiveEvents = false\nif (typeof window !== 'undefined') {\n  const passiveTestOptions = {\n    get passive() {\n      hasPassiveEvents = true\n      return undefined\n    }\n  }\n  window.addEventListener('testPassive', null, passiveTestOptions)\n  window.removeEventListener('testPassive', null, passiveTestOptions)\n}\n\nconst isIosDevice =\n  typeof window !== 'undefined' &&\n  window.navigator &&\n  window.navigator.platform &&\n  (/iP(ad|hone|od)/.test(window.navigator.platform) ||\n    (window.navigator.platform === 'MacIntel' && window.navigator.maxTouchPoints > 1))\n\nlet locks = []\nlet documentListenerAdded = false\nlet clientY = 0\nlet initialClientY = -1\nlet previousBodyOverflowSetting\nlet previousBodyPaddingRight\n\nconst hasScrollbar = el => {\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\n\n  const style = window.getComputedStyle(el)\n  return ['auto', 'scroll'].includes(style.overflowY) && el.scrollHeight > el.clientHeight\n}\n\nconst shouldScroll = (el, delta) => {\n  if (el.scrollTop === 0 && delta < 0) return false\n  if (el.scrollTop + el.clientHeight + delta >= el.scrollHeight && delta > 0) return false\n  return true\n}\n\nconst composedPath = el => {\n  const path = []\n  while (el) {\n    path.push(el)\n    if (el.classList.contains('vfm')) return path\n    el = el.parentElement\n  }\n  return path\n}\n\nconst hasAnyScrollableEl = (el, delta) => {\n  let hasAnyScrollableEl = false\n  const path = composedPath(el)\n  path.forEach(el => {\n    if (hasScrollbar(el) && shouldScroll(el, delta)) {\n      hasAnyScrollableEl = true\n    }\n  })\n  return hasAnyScrollableEl\n}\n\n// returns true if `el` should be allowed to receive touchmove events.\nconst allowTouchMove = el => locks.some(() => hasAnyScrollableEl(el, -clientY))\n\nconst preventDefault = rawEvent => {\n  const e = rawEvent || window.event\n\n  // For the case whereby consumers adds a touchmove event listener to document.\n  // Recall that we do document.addEventListener('touchmove', preventDefault, { passive: false })\n  // in disableBodyScroll - so if we provide this opportunity to allowTouchMove, then\n  // the touchmove event on document will break.\n  if (allowTouchMove(e.target)) {\n    return true\n  }\n  // Do not prevent if the event has more than one touch (usually meaning this is a multi touch gesture like pinch to zoom).\n  if (e.touches.length > 1) return true\n\n  if (e.preventDefault) e.preventDefault()\n\n  return false\n}\n\nconst setOverflowHidden = options => {\n  // If previousBodyPaddingRight is already set, don't set it again.\n  if (previousBodyPaddingRight === undefined) {\n    const reserveScrollBarGap = !!options && options.reserveScrollBarGap === true\n    const scrollBarGap = window.innerWidth - document.documentElement.clientWidth\n\n    if (reserveScrollBarGap && scrollBarGap > 0) {\n      const computedBodyPaddingRight = parseInt(getComputedStyle(document.body).getPropertyValue('padding-right'), 10)\n      previousBodyPaddingRight = document.body.style.paddingRight\n      document.body.style.paddingRight = `${computedBodyPaddingRight + scrollBarGap}px`\n    }\n  }\n  // If previousBodyOverflowSetting is already set, don't set it again.\n  if (previousBodyOverflowSetting === undefined) {\n    previousBodyOverflowSetting = document.body.style.overflow\n    document.body.style.overflow = 'hidden'\n  }\n}\n\nconst restoreOverflowSetting = () => {\n  if (previousBodyPaddingRight !== undefined) {\n    document.body.style.paddingRight = previousBodyPaddingRight\n\n    // Restore previousBodyPaddingRight to undefined so setOverflowHidden knows it\n    // can be set again.\n    previousBodyPaddingRight = undefined\n  }\n\n  if (previousBodyOverflowSetting !== undefined) {\n    document.body.style.overflow = previousBodyOverflowSetting\n\n    // Restore previousBodyOverflowSetting to undefined\n    // so setOverflowHidden knows it can be set again.\n    previousBodyOverflowSetting = undefined\n  }\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollHeight#Problems_and_solutions\nconst isTargetElementTotallyScrolled = targetElement =>\n  targetElement ? targetElement.scrollHeight - targetElement.scrollTop <= targetElement.clientHeight : false\n\nconst handleScroll = (event, targetElement) => {\n  clientY = event.targetTouches[0].clientY - initialClientY\n\n  if (allowTouchMove(event.target)) {\n    return false\n  }\n\n  if (targetElement && targetElement.scrollTop === 0 && clientY > 0) {\n    // element is at the top of its scroll.\n    return preventDefault(event)\n  }\n\n  if (isTargetElementTotallyScrolled(targetElement) && clientY < 0) {\n    // element is at the bottom of its scroll.\n    return preventDefault(event)\n  }\n\n  event.stopPropagation()\n  return true\n}\n\nexport const disableBodyScroll = (targetElement, options) => {\n  // targetElement must be provided\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error(\n      'disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.'\n    )\n    return\n  }\n\n  // disableBodyScroll must not have been called on this targetElement before\n  if (locks.some(lock => lock.targetElement === targetElement)) {\n    return\n  }\n\n  const lock = {\n    targetElement,\n    options: options || {}\n  }\n\n  locks = [...locks, lock]\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = event => {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        initialClientY = event.targetTouches[0].clientY\n      }\n    }\n    targetElement.ontouchmove = event => {\n      if (event.targetTouches.length === 1) {\n        // detect single touch.\n        handleScroll(event, targetElement)\n      }\n    }\n\n    if (!documentListenerAdded) {\n      document.addEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined)\n      documentListenerAdded = true\n    }\n  } else {\n    setOverflowHidden(options)\n  }\n}\n\nexport const enableBodyScroll = targetElement => {\n  if (!targetElement) {\n    // eslint-disable-next-line no-console\n    console.error(\n      'enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.'\n    )\n    return\n  }\n\n  locks = locks.filter(lock => lock.targetElement !== targetElement)\n\n  if (isIosDevice) {\n    targetElement.ontouchstart = null\n    targetElement.ontouchmove = null\n\n    if (documentListenerAdded && locks.length === 0) {\n      document.removeEventListener('touchmove', preventDefault, hasPassiveEvents ? { passive: false } : undefined)\n      documentListenerAdded = false\n    }\n  } else if (!locks.length) {\n    restoreOverflowSetting()\n  }\n}\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown.esc=\"onEsc\"\n  >\n    <transition\n      v-bind=\"computedOverlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      v-bind=\"computedTransition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @mouseup.self=\"onMouseupContainer\"\n        @mousedown.self=\"onMousedown\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"bindContentStyle\"\n          @mousedown=\"onMousedown(null)\"\n        >\n          <slot :params=\"params\" :close=\"() => $emit('update:modelValue', false)\" />\n          <div\n            v-if=\"visibility.resize && visibility.modal\"\n            ref=\"vfmResize\"\n            class=\"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n          >\n            <div\n              v-for=\"direction in resizeDirections\"\n              :key=\"direction\"\n              :direction=\"direction\"\n              :class=\"`vfm--resize-${direction}`\"\n              class=\"vfm--absolute vfm--prevent-auto\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable vue/no-mutating-props */\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport {\n  setStyle,\n  getPosition,\n  capitalize,\n  clamp,\n  trimPx,\n  validDragElement,\n  addListener,\n  removeListener\n} from './utils/dragResize.js'\nimport { disableBodyScroll, enableBodyScroll } from './utils/bodyScrollLock'\n\nconst noop = () => {}\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nconst resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [Object, Array], default: () => ({}) },\n    overlayStyle: { type: [Object, Array], default: () => ({}) },\n    contentStyle: { type: [Object, Array], default: () => ({}) },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: [String, Object], default: 'vfm' },\n    overlayTransition: { type: [String, Object], default: 'vfm' },\n    keepOverlay: { type: Boolean, default: false },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false },\n    fitParent: { type: Boolean, default: true },\n    drag: { type: Boolean, default: false },\n    dragSelector: { type: String, default: '' },\n    keepChangedStyle: { type: Boolean, default: false },\n    resize: {\n      type: Boolean,\n      default: false\n    },\n    resizeDirections: {\n      type: Array,\n      default: () => ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'],\n      validator: val =>\n        ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(value => val.indexOf(value) !== -1).length === val.length\n    },\n    minWidth: { type: Number, default: 0 },\n    minHeight: { type: Number, default: 0 },\n    maxWidth: { type: Number, default: Infinity },\n    maxHeight: { type: Number, default: Infinity }\n  },\n  emits: [\n    'update:modelValue',\n    'click-outside',\n    'before-open',\n    'opened',\n    'before-close',\n    'closed',\n    '_before-open',\n    '_opened',\n    '_closed',\n    'drag:start',\n    'drag:move',\n    'drag:end',\n    'resize:start',\n    'resize:move',\n    'resize:end'\n  ],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContainer = ref(null)\n    const vfmContent = ref(null)\n    const vfmResize = ref(null)\n    const vfmOverlayTransition = ref(null)\n    const vfmTransition = ref(null)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n    const _stopEvent = ref(false)\n    const params = ref({})\n    const dragResizeStyle = ref({})\n    const _state = ref(null)\n    const lastMousedownEl = ref(null)\n\n    let resolveToggle = noop\n    let rejectToggle = noop\n\n    const computedOverlayTransition = computed(() => {\n      if (typeof props.overlayTransition === 'string') return { name: props.overlayTransition }\n      return { ...props.overlayTransition }\n    })\n\n    const computedTransition = computed(() => {\n      if (typeof props.transition === 'string') return { name: props.transition }\n      return { ...props.transition }\n    })\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        } else {\n          return false\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    const bindStyle = computed(() => {\n      return {\n        ...(calculateZIndex.value !== false && {\n          zIndex: calculateZIndex.value\n        })\n      }\n    })\n\n    const bindContentStyle = computed(() => {\n      let style = [dragResizeStyle.value]\n      Array.isArray(props.contentStyle) ? style.push(...props.contentStyle) : style.push(props.contentStyle)\n      return style\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        if (_stopEvent.value) {\n          _stopEvent.value = false\n          return\n        }\n        mounted()\n        if (!value) {\n          if (emitEvent('before-close', true)) {\n            rejectToggle('hide')\n            return\n          }\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n          vfmContainer.value.style.display = 'none'\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n    watch(\n      () => props.drag,\n      val => {\n        if (visible.value) {\n          val ? addDragDown() : removeDragDown()\n        }\n      }\n    )\n    watch(\n      () => props.resize,\n      val => {\n        if (visible.value) {\n          val ? addResizeDown() : removeResizeDown()\n        }\n      }\n    )\n    watch(\n      () => props.keepChangedStyle,\n      val => {\n        if (!val) {\n          dragResizeStyle.value = {}\n        }\n      }\n    )\n\n    onMounted(() => {\n      props.api.modals.push(getModalInfo())\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value)\n      root?.value?.remove()\n\n      let index = props.api.modals.findIndex(vm => vm.uid === uid)\n\n      props.api.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        props,\n        emit,\n        vfmContainer,\n        vfmContent,\n        vfmResize,\n        vfmOverlayTransition,\n        vfmTransition,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        $focusTrap,\n        toggle,\n        params\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({ type: '_before-open' }))\n        if (emitEvent('before-open', false)) {\n          rejectToggle('show')\n          return\n        }\n\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value)\n            } else {\n              visible.value = true\n              nextTick(() => {\n                mounted()\n              })\n              return\n            }\n          }\n\n          let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            props.api.openedModals.splice(index, 1)\n          }\n          props.api.openedModals.push(getModalInfo())\n\n          modalStackIndex.value = props.api.openedModals.length - 1\n\n          handleLockScroll()\n\n          props.api.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                !vm.props.keepOverlay && (vm.visibility.overlay = false)\n              }\n            })\n\n          visible.value = true\n          startTransitionEnter()\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        props.api.openedModals.splice(index, 1)\n      }\n      if (props.api.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = props.api.openedModals[props.api.openedModals.length - 1]\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      props.drag && removeDragDown()\n      props.resize && removeResizeDown()\n      _state.value = null\n\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(() => {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            })\n          } else {\n            enableBodyScroll(vfmContainer.value)\n          }\n        })\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value)\n      props.drag && addDragDown()\n      props.resize && addResizeDown()\n\n      emit('_opened')\n      emit('opened', createModalEvent({ type: 'opened' }))\n      resolveToggle('show')\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      props.lockScroll && enableBodyScroll(vfmContainer.value)\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {}\n      }\n\n      let stopEvent = false\n      const event = createModalEvent({\n        type: 'closed',\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit('_closed')\n      emit('closed', event)\n      resolveToggle('hide')\n      if (stopEvent) return\n      params.value = {}\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e?.target\n    }\n    function onMouseupContainer() {\n      // skip when the lastMousedownEl didn't equal vfmContainer\n      if (lastMousedownEl.value !== vfmContainer.value) return\n      // skip when state equal 'resize:move'\n      if (_state.value === 'resize:move') return\n      emit('click-outside', createModalEvent({ type: 'click-outside' }))\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    function createModalEvent(eventProps = {}) {\n      return {\n        ref: getModalInfo(),\n        ...eventProps\n      }\n    }\n    function emitEvent(eventType, value) {\n      let stopEvent = false\n      const event = createModalEvent({\n        type: eventType,\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit(eventType, event)\n      if (stopEvent) {\n        _stopEvent.value = true\n        nextTick(() => {\n          emit('update:modelValue', value)\n        })\n        return true\n      }\n      return false\n    }\n    function emitState(e, state, action) {\n      _state.value = `${state}:${action}`\n      emit(_state.value, e)\n    }\n    function toggle(show, _params) {\n      return new Promise((resolve, reject) => {\n        resolveToggle = res => {\n          resolve(res)\n          resolveToggle = noop\n        }\n        rejectToggle = err => {\n          reject(err)\n          rejectToggle = noop\n        }\n        const value = typeof show === 'boolean' ? show : !props.modelValue\n        if (value && arguments.length === 2) {\n          params.value = _params\n        }\n        emit('update:modelValue', value)\n      })\n    }\n    function pointerDown(e) {\n      e.stopPropagation()\n      const STATE_RESIZE = 'resize'\n      const STATE_DRAG = 'drag'\n      const direction = e.target.getAttribute('direction')\n      let state\n      if (direction) {\n        state = STATE_RESIZE\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG\n      } else {\n        return\n      }\n      emitState(e, state, 'start')\n      const down = getPosition(e)\n      const rectContainer = vfmContainer.value.getBoundingClientRect()\n      const rectContent = vfmContent.value.getBoundingClientRect()\n      const isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute'\n      const position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      }\n      const limit = (() => {\n        if (props.fitParent) {\n          const limit = {\n            absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              }\n            },\n            relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              }\n            }\n          }\n          return isAbsolute ? limit.absolute() : limit.relative()\n        } else {\n          return {}\n        }\n      })()\n      const resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction])\n\n      const moving = e => {\n        // onPointerMove\n        e.stopPropagation()\n        emitState(e, state, 'move')\n        const move = getPosition(e)\n        let offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        }\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute)\n        }\n\n        let top\n        let left\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y\n          left = rectContent.left - rectContainer.left + offset.x\n        } else {\n          top = position.top + offset.y\n          left = position.left + offset.x\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop)\n          left = clamp(limit.minLeft, left, limit.maxLeft)\n        }\n        const style = {\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none',\n          ...(isAbsolute && {\n            position: 'absolute',\n            transform: 'unset',\n            width: rectContent.width + 'px',\n            height: rectContent.height + 'px'\n          }),\n          ...(offset.width && { width: offset.width + 'px' }),\n          ...(offset.height && { height: offset.height + 'px' })\n        }\n\n        dragResizeStyle.value = {\n          ...dragResizeStyle.value,\n          ...style\n        }\n      }\n      const end = e => {\n        // onPointerUp\n        e.stopPropagation()\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor()\n        }\n        // Excute onMouseupContainer before trigger emitState\n        setTimeout(() => {\n          emitState(e, state, 'end')\n        })\n        removeListener('move', document, moving)\n        removeListener('up', document, end)\n      }\n      addListener('move', document, moving)\n      addListener('up', document, end)\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown)\n      dragResizeStyle.value.touchAction = 'none'\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown)\n    }\n    function addResizeDown() {\n      visibility.resize = true\n      nextTick(() => {\n        addListener('down', vfmResize.value, pointerDown)\n      })\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown)\n      visibility.resize = false\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      const setOffset = dir => {\n        let offsetAxis = offset[dir.axis]\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis\n        let edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge)\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute)\n        return {\n          [dir.edgeName]: edge,\n          [dir.axis]: offsetAxis\n        }\n      }\n\n      const getDirectionInfo = (position, edgeName, axis, isPositive) => {\n        const rectContentEdge = rectContent[edgeName]\n        const positionOffset = rectContainer[position] - rectContent[position]\n        const EdgeName = capitalize(edgeName)\n        return {\n          axis,\n          edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[`min${EdgeName}`],\n          maxEdge: props[`max${EdgeName}`],\n          getEdge: offsetAxis => rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1),\n          getOffsetAxis: (edge, isAbsolute) => {\n            const offsetAxis = rectContent[edgeName] - edge\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0\n            } else {\n              return ((isPositive ? 1 : -1) * offsetAxis) / 2\n            }\n          }\n        }\n      }\n\n      const directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      }\n\n      let _offset = { x: 0, y: 0 }\n      direction.split('').forEach(dir => {\n        const directionInfo = getDirectionInfo(...directions[dir])\n        _offset = {\n          ..._offset,\n          ...setOffset(directionInfo)\n        }\n      })\n      return _offset\n    }\n    return {\n      root,\n      vfmContainer,\n      vfmContent,\n      vfmResize,\n      vfmOverlayTransition,\n      vfmTransition,\n      computedOverlayTransition,\n      computedTransition,\n      visible,\n      visibility,\n      params,\n      calculateZIndex,\n      bindStyle,\n      bindContentStyle,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onMousedown,\n      onMouseupContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n\n.vfm--touch-none {\n  touch-action: none;\n}\n.vfm--select-none {\n  user-select: none;\n}\n\n.vfm--resize-tr,\n.vfm--resize-br,\n.vfm--resize-bl,\n.vfm--resize-tl {\n  width: 12px;\n  height: 12px;\n  z-index: 10;\n}\n\n.vfm--resize-t {\n  top: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-tr {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-r {\n  top: 0;\n  right: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-br {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.vfm--resize-b {\n  bottom: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-bl {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-l {\n  top: 0;\n  left: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-tl {\n  top: -6px;\n  left: -6px;\n  cursor: nwse-resize;\n}\n</style>\n","<template>\n  <div\n    v-if=\"ssr || visible\"\n    v-show=\"!ssr || visible\"\n    ref=\"root\"\n    :style=\"bindStyle\"\n    class=\"vfm vfm--inset\"\n    :class=\"[attach === false ? 'vfm--fixed' : 'vfm--absolute', { 'vfm--prevent-none': preventClick }]\"\n    @keydown.esc=\"onEsc\"\n  >\n    <transition\n      v-bind=\"computedOverlayTransition\"\n      @before-enter=\"beforeOverlayEnter\"\n      @after-enter=\"afterOverlayEnter\"\n      @before-leave=\"beforeOverlayLeave\"\n      @after-leave=\"afterOverlayLeave\"\n    >\n      <div\n        v-if=\"!hideOverlay && visibility.overlay\"\n        class=\"vfm__overlay vfm--overlay vfm--absolute vfm--inset\"\n        :class=\"overlayClass\"\n        :style=\"overlayStyle\"\n      ></div>\n    </transition>\n    <transition\n      v-bind=\"computedTransition\"\n      @before-enter=\"beforeModalEnter\"\n      @after-enter=\"afterModalEnter\"\n      @before-leave=\"beforeModalLeave\"\n      @after-leave=\"afterModalLeave\"\n    >\n      <div\n        v-show=\"visibility.modal\"\n        ref=\"vfmContainer\"\n        class=\"vfm__container vfm--absolute vfm--inset vfm--outline-none\"\n        :class=\"classes\"\n        :style=\"styles\"\n        :aria-expanded=\"visibility.modal.toString()\"\n        role=\"dialog\"\n        aria-modal=\"true\"\n        tabindex=\"-1\"\n        @mouseup.self=\"onMouseupContainer\"\n        @mousedown.self=\"onMousedown\"\n      >\n        <div\n          ref=\"vfmContent\"\n          class=\"vfm__content\"\n          :class=\"[contentClass, { 'vfm--prevent-auto': preventClick }]\"\n          :style=\"bindContentStyle\"\n          @mousedown=\"onMousedown(null)\"\n        >\n          <slot :params=\"params\" :close=\"() => $emit('update:modelValue', false)\" />\n          <div\n            v-if=\"visibility.resize && visibility.modal\"\n            ref=\"vfmResize\"\n            class=\"vfm__resize vfm--absolute vfm--inset vfm--prevent-none vfm--select-none vfm--touch-none\"\n          >\n            <div\n              v-for=\"direction in resizeDirections\"\n              :key=\"direction\"\n              :direction=\"direction\"\n              :class=\"`vfm--resize-${direction}`\"\n              class=\"vfm--absolute vfm--prevent-auto\"\n            ></div>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\n/* eslint-disable vue/no-mutating-props */\nimport { ref, reactive, onMounted, onBeforeUnmount, computed, nextTick, watch } from 'vue'\nimport FocusTrap from './utils/focusTrap.js'\nimport {\n  setStyle,\n  getPosition,\n  capitalize,\n  clamp,\n  trimPx,\n  validDragElement,\n  addListener,\n  removeListener\n} from './utils/dragResize.js'\nimport { disableBodyScroll, enableBodyScroll } from './utils/bodyScrollLock'\n\nconst noop = () => {}\n\nconst TransitionState = {\n  Enter: 'enter',\n  Entering: 'entering',\n  Leave: 'leave',\n  Leaving: 'leavng'\n}\n\nconst resizeCursor = {\n  t: 'ns-resize',\n  tr: 'nesw-resize',\n  r: 'ew-resize',\n  br: 'nwse-resize',\n  b: 'ns-resize',\n  bl: 'nesw-resize',\n  l: 'ew-resize',\n  tl: 'nwse-resize'\n}\n\nexport default {\n  props: {\n    name: { type: String, default: null },\n    modelValue: { type: Boolean, default: false },\n    ssr: { type: Boolean, default: true },\n    classes: { type: [String, Object, Array], default: '' },\n    overlayClass: { type: [String, Object, Array], default: '' },\n    contentClass: { type: [String, Object, Array], default: '' },\n    styles: { type: [Object, Array], default: () => ({}) },\n    overlayStyle: { type: [Object, Array], default: () => ({}) },\n    contentStyle: { type: [Object, Array], default: () => ({}) },\n    lockScroll: { type: Boolean, default: true },\n    hideOverlay: { type: Boolean, default: false },\n    clickToClose: { type: Boolean, default: true },\n    escToClose: { type: Boolean, default: false },\n    preventClick: { type: Boolean, default: false },\n    attach: {\n      type: null,\n      default: false,\n      validator(val) {\n        const type = typeof val\n\n        if (type === 'boolean' || type === 'string') return true\n\n        return val.nodeType === Node.ELEMENT_NODE\n      }\n    },\n    transition: { type: [String, Object], default: 'vfm' },\n    overlayTransition: { type: [String, Object], default: 'vfm' },\n    keepOverlay: { type: Boolean, default: false },\n    zIndexAuto: { type: Boolean, default: true },\n    zIndexBase: { type: [String, Number], default: 1000 },\n    zIndex: { type: [Boolean, String, Number], default: false },\n    focusRetain: { type: Boolean, default: true },\n    focusTrap: { type: Boolean, default: false },\n    fitParent: { type: Boolean, default: true },\n    drag: { type: Boolean, default: false },\n    dragSelector: { type: String, default: '' },\n    keepChangedStyle: { type: Boolean, default: false },\n    resize: {\n      type: Boolean,\n      default: false\n    },\n    resizeDirections: {\n      type: Array,\n      default: () => ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'],\n      validator: val =>\n        ['t', 'tr', 'r', 'br', 'b', 'bl', 'l', 'tl'].filter(value => val.indexOf(value) !== -1).length === val.length\n    },\n    minWidth: { type: Number, default: 0 },\n    minHeight: { type: Number, default: 0 },\n    maxWidth: { type: Number, default: Infinity },\n    maxHeight: { type: Number, default: Infinity }\n  },\n  emits: [\n    'update:modelValue',\n    'click-outside',\n    'before-open',\n    'opened',\n    'before-close',\n    'closed',\n    '_before-open',\n    '_opened',\n    '_closed',\n    'drag:start',\n    'drag:move',\n    'drag:end',\n    'resize:start',\n    'resize:move',\n    'resize:end'\n  ],\n  setup(props, { emit }) {\n    const uid = Symbol('vfm')\n    const root = ref(null)\n    const vfmContainer = ref(null)\n    const vfmContent = ref(null)\n    const vfmResize = ref(null)\n    const vfmOverlayTransition = ref(null)\n    const vfmTransition = ref(null)\n\n    const modalStackIndex = ref(null)\n    const $focusTrap = new FocusTrap()\n\n    const visible = ref(false)\n    const visibility = reactive({\n      modal: false,\n      overlay: false,\n      resize: false\n    })\n    const overlayTransitionState = ref(null)\n    const modalTransitionState = ref(null)\n    const _stopEvent = ref(false)\n    const params = ref({})\n    const dragResizeStyle = ref({})\n    const _state = ref(null)\n    const lastMousedownEl = ref(null)\n\n    let resolveToggle = noop\n    let rejectToggle = noop\n\n    const computedOverlayTransition = computed(() => {\n      if (typeof props.overlayTransition === 'string') return { name: props.overlayTransition }\n      return { ...props.overlayTransition }\n    })\n\n    const computedTransition = computed(() => {\n      if (typeof props.transition === 'string') return { name: props.transition }\n      return { ...props.transition }\n    })\n\n    const isComponentReadyToBeDestroyed = computed(() => {\n      return (\n        (props.hideOverlay || overlayTransitionState.value === TransitionState.Leave) &&\n        modalTransitionState.value === TransitionState.Leave\n      )\n    })\n\n    const calculateZIndex = computed(() => {\n      if (props.zIndex === false) {\n        if (props.zIndexAuto) {\n          return +props.zIndexBase + 2 * (modalStackIndex.value || 0)\n        } else {\n          return false\n        }\n      } else {\n        return props.zIndex\n      }\n    })\n\n    const bindStyle = computed(() => {\n      return {\n        ...(calculateZIndex.value !== false && {\n          zIndex: calculateZIndex.value\n        })\n      }\n    })\n\n    const bindContentStyle = computed(() => {\n      let style = [dragResizeStyle.value]\n      Array.isArray(props.contentStyle) ? style.push(...props.contentStyle) : style.push(props.contentStyle)\n      return style\n    })\n\n    watch(\n      () => props.modelValue,\n      value => {\n        if (_stopEvent.value) {\n          _stopEvent.value = false\n          return\n        }\n        mounted()\n        if (!value) {\n          if (emitEvent('before-close', true)) {\n            rejectToggle('hide')\n            return\n          }\n          close()\n        }\n      }\n    )\n    watch(() => props.lockScroll, handleLockScroll)\n    watch(\n      () => props.hideOverlay,\n      value => {\n        if (props.modelValue && !value) {\n          visibility.overlay = true\n        }\n      }\n    )\n    watch(() => props.attach, mounted)\n    watch(\n      isComponentReadyToBeDestroyed,\n      val => {\n        if (val) {\n          visible.value = false\n          vfmContainer.value.style.display = 'none'\n        }\n      },\n      {\n        flush: 'post'\n      }\n    )\n    watch(\n      () => props.drag,\n      val => {\n        if (visible.value) {\n          val ? addDragDown() : removeDragDown()\n        }\n      }\n    )\n    watch(\n      () => props.resize,\n      val => {\n        if (visible.value) {\n          val ? addResizeDown() : removeResizeDown()\n        }\n      }\n    )\n    watch(\n      () => props.keepChangedStyle,\n      val => {\n        if (!val) {\n          dragResizeStyle.value = {}\n        }\n      }\n    )\n\n    onMounted(() => {\n      props.api.modals.push(getModalInfo())\n      mounted()\n    })\n    onBeforeUnmount(() => {\n      close()\n      props.lockScroll && vfmContainer.value && enableBodyScroll(vfmContainer.value)\n      root?.value?.remove()\n\n      let index = props.api.modals.findIndex(vm => vm.uid === uid)\n\n      props.api.modals.splice(index, 1)\n    })\n    function getModalInfo() {\n      return {\n        uid,\n        props,\n        emit,\n        vfmContainer,\n        vfmContent,\n        vfmResize,\n        vfmOverlayTransition,\n        vfmTransition,\n        getAttachElement,\n        modalStackIndex,\n        visibility,\n        handleLockScroll,\n        $focusTrap,\n        toggle,\n        params\n      }\n    }\n    function mounted() {\n      if (props.modelValue) {\n        emit('_before-open', createModalEvent({ type: '_before-open' }))\n        if (emitEvent('before-open', false)) {\n          rejectToggle('show')\n          return\n        }\n\n        let target = getAttachElement()\n        if (target || props.attach === false) {\n          if (props.attach !== false) {\n            if (root.value) {\n              target.appendChild(root.value)\n            } else {\n              visible.value = true\n              nextTick(() => {\n                mounted()\n              })\n              return\n            }\n          }\n\n          let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n\n          if (index !== -1) {\n            // if this is already exist in modalStack, delete it\n            props.api.openedModals.splice(index, 1)\n          }\n          props.api.openedModals.push(getModalInfo())\n\n          modalStackIndex.value = props.api.openedModals.length - 1\n\n          handleLockScroll()\n\n          props.api.openedModals\n            .filter(vm => vm.uid !== uid)\n            .forEach((vm, index) => {\n              if (vm.getAttachElement() === target) {\n                // if vm and this have the same attach element\n                vm.modalStackIndex.value = index\n                !vm.props.keepOverlay && (vm.visibility.overlay = false)\n              }\n            })\n\n          visible.value = true\n          startTransitionEnter()\n        } else if (target !== false) {\n          console.warn('Unable to locate target '.concat(props.attach))\n        }\n      }\n    }\n    function close() {\n      let index = props.api.openedModals.findIndex(vm => vm.uid === uid)\n      if (index !== -1) {\n        // remove this in modalStack\n        props.api.openedModals.splice(index, 1)\n      }\n      if (props.api.openedModals.length > 0) {\n        // If there are still nested modals opened\n        const $_vm = props.api.openedModals[props.api.openedModals.length - 1]\n        $_vm.props.focusTrap && $_vm.$focusTrap.firstElement().focus()\n        if ($_vm.props.focusRetain || $_vm.props.focusTrap) {\n          $_vm.vfmContainer.value.focus()\n        }\n        !$_vm.props.hideOverlay && ($_vm.visibility.overlay = true)\n      }\n      props.drag && removeDragDown()\n      props.resize && removeResizeDown()\n      _state.value = null\n\n      startTransitionLeave()\n    }\n    function handleLockScroll() {\n      if (props.modelValue) {\n        nextTick(() => {\n          if (props.lockScroll) {\n            disableBodyScroll(vfmContainer.value, {\n              reserveScrollBarGap: true\n            })\n          } else {\n            enableBodyScroll(vfmContainer.value)\n          }\n        })\n      }\n    }\n    function getAttachElement() {\n      let target\n      if (props.attach === false) {\n        target = false\n      } else if (typeof props.attach === 'string') {\n        // CSS selector\n        if (window) {\n          target = window.document.querySelector(props.attach)\n        } else {\n          target = false\n        }\n      } else {\n        // DOM Element\n        target = props.attach\n      }\n      return target\n    }\n    function startTransitionEnter() {\n      visibility.overlay = true\n      visibility.modal = true\n    }\n    function startTransitionLeave() {\n      visibility.overlay = false\n      visibility.modal = false\n    }\n\n    function beforeOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Entering\n    }\n    function afterOverlayEnter() {\n      overlayTransitionState.value = TransitionState.Enter\n    }\n    function beforeOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leaving\n    }\n    function afterOverlayLeave() {\n      overlayTransitionState.value = TransitionState.Leave\n    }\n    function beforeModalEnter() {\n      modalTransitionState.value = TransitionState.Entering\n    }\n    function afterModalEnter() {\n      modalTransitionState.value = TransitionState.Enter\n      if (props.focusRetain || props.focusTrap) {\n        vfmContainer.value.focus()\n      }\n      props.focusTrap && $focusTrap.enable(vfmContainer.value)\n      props.drag && addDragDown()\n      props.resize && addResizeDown()\n\n      emit('_opened')\n      emit('opened', createModalEvent({ type: 'opened' }))\n      resolveToggle('show')\n    }\n    function beforeModalLeave() {\n      modalTransitionState.value = TransitionState.Leaving\n\n      if ($focusTrap.enabled()) {\n        $focusTrap.disable()\n      }\n    }\n    function afterModalLeave() {\n      modalTransitionState.value = TransitionState.Leave\n      modalStackIndex.value = null\n      props.lockScroll && enableBodyScroll(vfmContainer.value)\n      if (!props.keepChangedStyle) {\n        dragResizeStyle.value = {}\n      }\n\n      let stopEvent = false\n      const event = createModalEvent({\n        type: 'closed',\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit('_closed')\n      emit('closed', event)\n      resolveToggle('hide')\n      if (stopEvent) return\n      params.value = {}\n    }\n    function onMousedown(e) {\n      lastMousedownEl.value = e?.target\n    }\n    function onMouseupContainer() {\n      // skip when the lastMousedownEl didn't equal vfmContainer\n      if (lastMousedownEl.value !== vfmContainer.value) return\n      // skip when state equal 'resize:move'\n      if (_state.value === 'resize:move') return\n      emit('click-outside', createModalEvent({ type: 'click-outside' }))\n      props.clickToClose && emit('update:modelValue', false)\n    }\n    function onEsc() {\n      if (visible.value && props.escToClose) {\n        emit('update:modelValue', false)\n      }\n    }\n    function createModalEvent(eventProps = {}) {\n      return {\n        ref: getModalInfo(),\n        ...eventProps\n      }\n    }\n    function emitEvent(eventType, value) {\n      let stopEvent = false\n      const event = createModalEvent({\n        type: eventType,\n        stop() {\n          stopEvent = true\n        }\n      })\n      emit(eventType, event)\n      if (stopEvent) {\n        _stopEvent.value = true\n        nextTick(() => {\n          emit('update:modelValue', value)\n        })\n        return true\n      }\n      return false\n    }\n    function emitState(e, state, action) {\n      _state.value = `${state}:${action}`\n      emit(_state.value, e)\n    }\n    function toggle(show, _params) {\n      return new Promise((resolve, reject) => {\n        resolveToggle = res => {\n          resolve(res)\n          resolveToggle = noop\n        }\n        rejectToggle = err => {\n          reject(err)\n          rejectToggle = noop\n        }\n        const value = typeof show === 'boolean' ? show : !props.modelValue\n        if (value && arguments.length === 2) {\n          params.value = _params\n        }\n        emit('update:modelValue', value)\n      })\n    }\n    function pointerDown(e) {\n      e.stopPropagation()\n      const STATE_RESIZE = 'resize'\n      const STATE_DRAG = 'drag'\n      const direction = e.target.getAttribute('direction')\n      let state\n      if (direction) {\n        state = STATE_RESIZE\n      } else if (validDragElement(e, vfmContent.value, props.dragSelector)) {\n        state = STATE_DRAG\n      } else {\n        return\n      }\n      emitState(e, state, 'start')\n      const down = getPosition(e)\n      const rectContainer = vfmContainer.value.getBoundingClientRect()\n      const rectContent = vfmContent.value.getBoundingClientRect()\n      const isAbsolute = window.getComputedStyle(vfmContent.value).position === 'absolute'\n      const position = {\n        top: trimPx(dragResizeStyle.value.top),\n        left: trimPx(dragResizeStyle.value.left)\n      }\n      const limit = (() => {\n        if (props.fitParent) {\n          const limit = {\n            absolute() {\n              return {\n                minTop: 0,\n                minLeft: 0,\n                maxTop: rectContainer.height - rectContent.height,\n                maxLeft: rectContainer.width - rectContent.width\n              }\n            },\n            relative() {\n              return {\n                minTop: position.top + rectContainer.top - rectContent.top,\n                minLeft: position.left + rectContainer.left - rectContent.left,\n                maxTop: position.top + rectContainer.bottom - rectContent.bottom,\n                maxLeft: position.left + rectContainer.right - rectContent.right\n              }\n            }\n          }\n          return isAbsolute ? limit.absolute() : limit.relative()\n        } else {\n          return {}\n        }\n      })()\n      const resetBodyCursor = state === STATE_RESIZE && setStyle(document.body, 'cursor', resizeCursor[direction])\n\n      const moving = e => {\n        // onPointerMove\n        e.stopPropagation()\n        emitState(e, state, 'move')\n        const move = getPosition(e)\n        let offset = {\n          x: move.x - down.x,\n          y: move.y - down.y\n        }\n        if (state === STATE_RESIZE) {\n          offset = getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute)\n        }\n\n        let top\n        let left\n        if (isAbsolute) {\n          top = rectContent.top - rectContainer.top + offset.y\n          left = rectContent.left - rectContainer.left + offset.x\n        } else {\n          top = position.top + offset.y\n          left = position.left + offset.x\n        }\n        if (state === STATE_DRAG && props.fitParent) {\n          top = clamp(limit.minTop, top, limit.maxTop)\n          left = clamp(limit.minLeft, left, limit.maxLeft)\n        }\n        const style = {\n          position: 'relative',\n          top: top + 'px',\n          left: left + 'px',\n          margin: 'unset',\n          touchAction: 'none',\n          ...(isAbsolute && {\n            position: 'absolute',\n            transform: 'unset',\n            width: rectContent.width + 'px',\n            height: rectContent.height + 'px'\n          }),\n          ...(offset.width && { width: offset.width + 'px' }),\n          ...(offset.height && { height: offset.height + 'px' })\n        }\n\n        dragResizeStyle.value = {\n          ...dragResizeStyle.value,\n          ...style\n        }\n      }\n      const end = e => {\n        // onPointerUp\n        e.stopPropagation()\n        if (state === STATE_RESIZE) {\n          resetBodyCursor && resetBodyCursor()\n        }\n        // Excute onMouseupContainer before trigger emitState\n        setTimeout(() => {\n          emitState(e, state, 'end')\n        })\n        removeListener('move', document, moving)\n        removeListener('up', document, end)\n      }\n      addListener('move', document, moving)\n      addListener('up', document, end)\n    }\n    function addDragDown() {\n      addListener('down', vfmContent.value, pointerDown)\n      dragResizeStyle.value.touchAction = 'none'\n    }\n    function removeDragDown() {\n      removeListener('down', vfmContent.value, pointerDown)\n    }\n    function addResizeDown() {\n      visibility.resize = true\n      nextTick(() => {\n        addListener('down', vfmResize.value, pointerDown)\n      })\n    }\n    function removeResizeDown() {\n      removeListener('down', vfmResize.value, pointerDown)\n      visibility.resize = false\n    }\n    function getResizeOffset(direction, offset, rectContainer, rectContent, isAbsolute) {\n      const setOffset = dir => {\n        let offsetAxis = offset[dir.axis]\n        offsetAxis = props.fitParent ? clamp(dir.min, offsetAxis, dir.max) : offsetAxis\n        let edge = clamp(dir.minEdge, dir.getEdge(offsetAxis), dir.maxEdge)\n        offsetAxis = dir.getOffsetAxis(edge, isAbsolute)\n        return {\n          [dir.edgeName]: edge,\n          [dir.axis]: offsetAxis\n        }\n      }\n\n      const getDirectionInfo = (position, edgeName, axis, isPositive) => {\n        const rectContentEdge = rectContent[edgeName]\n        const positionOffset = rectContainer[position] - rectContent[position]\n        const EdgeName = capitalize(edgeName)\n        return {\n          axis,\n          edgeName,\n          min: isPositive ? positionOffset : -rectContentEdge,\n          max: isPositive ? rectContentEdge : positionOffset,\n          minEdge: props[`min${EdgeName}`],\n          maxEdge: props[`max${EdgeName}`],\n          getEdge: offsetAxis => rectContent[edgeName] - offsetAxis * (isPositive ? 1 : -1),\n          getOffsetAxis: (edge, isAbsolute) => {\n            const offsetAxis = rectContent[edgeName] - edge\n            if (isAbsolute) {\n              return isPositive ? offsetAxis : 0\n            } else {\n              return ((isPositive ? 1 : -1) * offsetAxis) / 2\n            }\n          }\n        }\n      }\n\n      const directions = {\n        t: ['top', 'height', 'y', true],\n        b: ['bottom', 'height', 'y', false],\n        l: ['left', 'width', 'x', true],\n        r: ['right', 'width', 'x', false]\n      }\n\n      let _offset = { x: 0, y: 0 }\n      direction.split('').forEach(dir => {\n        const directionInfo = getDirectionInfo(...directions[dir])\n        _offset = {\n          ..._offset,\n          ...setOffset(directionInfo)\n        }\n      })\n      return _offset\n    }\n    return {\n      root,\n      vfmContainer,\n      vfmContent,\n      vfmResize,\n      vfmOverlayTransition,\n      vfmTransition,\n      computedOverlayTransition,\n      computedTransition,\n      visible,\n      visibility,\n      params,\n      calculateZIndex,\n      bindStyle,\n      bindContentStyle,\n      beforeOverlayEnter,\n      afterOverlayEnter,\n      beforeOverlayLeave,\n      afterOverlayLeave,\n      beforeModalEnter,\n      afterModalEnter,\n      beforeModalLeave,\n      afterModalLeave,\n      onMousedown,\n      onMouseupContainer,\n      onEsc\n    }\n  }\n}\n</script>\n\n<style lang=\"css\" scoped>\n.vfm--fixed {\n  position: fixed;\n}\n.vfm--absolute {\n  position: absolute;\n}\n.vfm--inset {\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vfm--overlay {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vfm--prevent-none {\n  pointer-events: none;\n}\n.vfm--prevent-auto {\n  pointer-events: auto;\n}\n.vfm--outline-none:focus {\n  outline: none;\n}\n.vfm-enter-active,\n.vfm-leave-active {\n  transition: opacity 0.2s;\n}\n.vfm-enter-from,\n.vfm-leave-to {\n  opacity: 0;\n}\n\n.vfm--touch-none {\n  touch-action: none;\n}\n.vfm--select-none {\n  user-select: none;\n}\n\n.vfm--resize-tr,\n.vfm--resize-br,\n.vfm--resize-bl,\n.vfm--resize-tl {\n  width: 12px;\n  height: 12px;\n  z-index: 10;\n}\n\n.vfm--resize-t {\n  top: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-tr {\n  top: -6px;\n  right: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-r {\n  top: 0;\n  right: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-br {\n  bottom: -6px;\n  right: -6px;\n  cursor: nwse-resize;\n}\n.vfm--resize-b {\n  bottom: -6px;\n  left: 0;\n  width: 100%;\n  height: 12px;\n  cursor: ns-resize;\n}\n.vfm--resize-bl {\n  bottom: -6px;\n  left: -6px;\n  cursor: nesw-resize;\n}\n.vfm--resize-l {\n  top: 0;\n  left: -6px;\n  width: 12px;\n  height: 100%;\n  cursor: ew-resize;\n}\n.vfm--resize-tl {\n  top: -6px;\n  left: -6px;\n  cursor: nwse-resize;\n}\n</style>\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in api.dynamicModals\"\n      :key=\"modal.id\"\n      v-bind=\"modal.bind\"\n      v-model=\"modal.value\"\n      v-on=\"modal.on\"\n      @_closed=\"slice(index)\"\n      @_beforeOpen=\"e => beforeOpen(e, modal)\"\n      @_opened=\"modal.opened\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" #[key] :key=\"key\">\n        <!-- eslint-disable vue/no-v-html -->\n        <div v-if=\"isString(slot)\" v-html=\"slot\"></div>\n        <component :is=\"slot.component\" v-else v-bind=\"slot.bind\" v-on=\"slot.on || {}\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  methods: {\n    slice(index) {\n      this.api.dynamicModals.splice(index, 1)\n    },\n    async beforeOpen(e, modal, index) {\n      e.ref.params.value = modal.params\n      await this.$nextTick()\n      await this.$nextTick()\n      if (!modal.value) {\n        this.slice(index)\n        modal.reject('show')\n      }\n    },\n    isString(val) {\n      return typeof val === 'string'\n    }\n  }\n}\n</script>\n","<template>\n  <div class=\"modals-container\">\n    <component\n      :is=\"modal.component\"\n      v-for=\"(modal, index) in api.dynamicModals\"\n      :key=\"modal.id\"\n      v-bind=\"modal.bind\"\n      v-model=\"modal.value\"\n      v-on=\"modal.on\"\n      @_closed=\"slice(index)\"\n      @_beforeOpen=\"e => beforeOpen(e, modal)\"\n      @_opened=\"modal.opened\"\n    >\n      <template v-for=\"(slot, key) in modal.slots\" #[key] :key=\"key\">\n        <!-- eslint-disable vue/no-v-html -->\n        <div v-if=\"isString(slot)\" v-html=\"slot\"></div>\n        <component :is=\"slot.component\" v-else v-bind=\"slot.bind\" v-on=\"slot.on || {}\" />\n      </template>\n    </component>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {},\n  methods: {\n    slice(index) {\n      this.api.dynamicModals.splice(index, 1)\n    },\n    async beforeOpen(e, modal, index) {\n      e.ref.params.value = modal.params\n      await this.$nextTick()\n      await this.$nextTick()\n      if (!modal.value) {\n        this.slice(index)\n        modal.reject('show')\n      }\n    },\n    isString(val) {\n      return typeof val === 'string'\n    }\n  }\n}\n</script>\n","import VueFinalModal from './VueFinalModal.vue'\nimport ModalsContainer from './ModalsContainer.vue'\nimport { shallowReactive } from 'vue'\n\nexport function defineApi() {\n  let _modalComponent = null\n\n  return {\n    show(modal, ...args) {\n      switch (typeof modal) {\n        case 'string':\n          return this.toggle(modal, true, ...args)\n        case 'object': {\n          return Promise.allSettled([\n            new Promise((resolve, reject) => {\n              const defaultModal = {\n                value: true,\n                id: Symbol('dynamicModal'),\n                component: _modalComponent,\n                bind: {},\n                slots: {},\n                on: {},\n                params: args[0],\n                reject,\n                opened() {\n                  resolve('show')\n                }\n              }\n              this.dynamicModals.push(shallowReactive(Object.assign(defaultModal, modal)))\n            })\n          ])\n        }\n      }\n    },\n    hide(...names) {\n      return this.toggle(names, false)\n    },\n    hideAll() {\n      return this.hide(...this.openedModals.map(modal => modal.props.name))\n    },\n    toggle(name, ...args) {\n      const modals = Array.isArray(name) ? this.get(...name) : this.get(name)\n      return Promise.allSettled(modals.map(modal => modal.toggle(...args)))\n    },\n    get(...names) {\n      return this.modals.filter(modal => names.includes(modal.props.name))\n    },\n    dynamicModals: shallowReactive([]),\n    openedModals: [],\n    modals: [],\n    _setDefaultModal(modalComponent) {\n      _modalComponent = modalComponent\n    }\n  }\n}\n\nfunction bindApi(component, api) {\n  const _component = { ...component, props: { ...component.props } }\n  Object.assign(_component.props, {\n    api: { type: Object, default: () => api }\n  })\n  return _component\n}\n\nexport function defineModal(api) {\n  const modalComponent = bindApi(VueFinalModal, api)\n  api._setDefaultModal(modalComponent)\n  return modalComponent\n}\n\nexport function defineContainer(api) {\n  return bindApi(ModalsContainer, api)\n}\n","import { defineApi, defineModal, defineContainer } from './PluginCore'\n\n/**\n * @description Ensure that `_vfm` is used when function `installPlugin` is executed for the first time\n */\nlet _count = 0\n\nconst _key = '$vfm'\nconst _componentName = 'VueFinalModal'\nconst _dynamicContainerName = 'ModalsContainer'\n\n/**\n * @description Support create multiple vfm instance\n */\nexport const defineVfm = () => {\n  let api = defineApi()\n  return {\n    [_key]: api,\n    [_componentName]: defineModal(api),\n    [_dynamicContainerName]: defineContainer(api)\n  }\n}\n\n/**\n * @description Create a vfm instance by default for directly support `import { $vfm, VueFinalModal, ModalsContainer } from 'vue-final-modal'`\n */\nconst _vfm = defineVfm()\nexport const { $vfm, VueFinalModal, ModalsContainer } = _vfm\n\n/**\n * @description Register vfm instance globally\n * @deprecated not available in vue-final-modal 4\n */\nconst installVfm = (App, options = {}) => {\n  const { $vfm, VueFinalModal, ModalsContainer } = _count === 0 ? _vfm : defineVfm()\n  _count += 1\n  const key = options.key || _key\n  const componentName = options.componentName || _componentName\n  const dynamicContainerName = options.dynamicContainerName || _dynamicContainerName\n  Object.defineProperty(App.config.globalProperties, key, {\n    get() {\n      return $vfm\n    }\n  })\n  App.provide(key, $vfm)\n  App.component(componentName, VueFinalModal)\n  App.component(dynamicContainerName, ModalsContainer)\n}\n\n/**\n * @description Vue plugin for register vfm instance globally\n * @deprecated not available in vue-final-modal 4\n */\nexport const vfmPlugin = pluginOptions => ({\n  install(App, options) {\n    const _options = Object.assign({}, pluginOptions, options)\n    installVfm(App, _options)\n  }\n})\n\nvfmPlugin.install = installVfm\n"],"names":["FOCUSABLE_ELEMENTS_QUERY","isTabPressed","event","key","keyCode","querySelectorAll","element","selector","queryFocusableElements","isFocused","document","activeElement","isNothingFocused","FocusTrap","root","elements","onKeyDown","bind","enable","disable","firstElement","lastElement","length","shiftKey","focus","preventDefault","addEventListener","removeEventListener","setStyle","el","value","cacheStyle","style","getPosition","e","targetTouches","x","clientX","y","clientY","capitalize","s","charAt","toUpperCase","slice","clamp","min","num","max","Math","trimPx","distance","Number","replace","validDragElement","dragSelector","list","includes","target","pointerType","down","pc","m","move","up","addListener","type","callback","passive","removeListener","hasPassiveEvents","window","passiveTestOptions","undefined","isIosDevice","navigator","platform","test","maxTouchPoints","locks","documentListenerAdded","initialClientY","previousBodyOverflowSetting","previousBodyPaddingRight","hasScrollbar","nodeType","Node","ELEMENT_NODE","getComputedStyle","overflowY","scrollHeight","clientHeight","shouldScroll","delta","scrollTop","composedPath","path","push","classList","contains","parentElement","hasAnyScrollableEl","forEach","allowTouchMove","some","rawEvent","touches","setOverflowHidden","options","reserveScrollBarGap","scrollBarGap","innerWidth","documentElement","clientWidth","computedBodyPaddingRight","parseInt","body","getPropertyValue","paddingRight","overflow","restoreOverflowSetting","isTargetElementTotallyScrolled","targetElement","handleScroll","stopPropagation","disableBodyScroll","console","error","lock","ontouchstart","ontouchmove","enableBodyScroll","filter","noop","TransitionState","Enter","Entering","Leave","Leaving","resizeCursor","t","tr","r","br","b","bl","l","tl","props","name","String","modelValue","Boolean","ssr","classes","Object","Array","overlayClass","contentClass","styles","overlayStyle","contentStyle","lockScroll","hideOverlay","clickToClose","escToClose","preventClick","attach","validator","val","transition","overlayTransition","keepOverlay","zIndexAuto","zIndexBase","zIndex","focusRetain","focusTrap","fitParent","drag","keepChangedStyle","resize","resizeDirections","indexOf","minWidth","minHeight","maxWidth","Infinity","maxHeight","emits","setup","emit","uid","Symbol","ref","vfmContainer","vfmContent","vfmResize","vfmOverlayTransition","vfmTransition","modalStackIndex","$focusTrap","visible","visibility","reactive","modal","overlay","overlayTransitionState","modalTransitionState","_stopEvent","params","dragResizeStyle","_state","lastMousedownEl","resolveToggle","rejectToggle","computedOverlayTransition","computed","computedTransition","isComponentReadyToBeDestroyed","calculateZIndex","bindStyle","bindContentStyle","isArray","watch","mounted","emitEvent","close","handleLockScroll","display","flush","addDragDown","removeDragDown","addResizeDown","removeResizeDown","onMounted","api","modals","getModalInfo","onBeforeUnmount","remove","index","findIndex","vm","splice","getAttachElement","toggle","createModalEvent","appendChild","nextTick","openedModals","startTransitionEnter","warn","concat","$_vm","startTransitionLeave","querySelector","beforeOverlayEnter","afterOverlayEnter","beforeOverlayLeave","afterOverlayLeave","beforeModalEnter","afterModalEnter","beforeModalLeave","enabled","afterModalLeave","stopEvent","stop","onMousedown","onMouseupContainer","onEsc","eventProps","eventType","emitState","state","action","show","_params","Promise","resolve","reject","res","err","arguments","pointerDown","STATE_RESIZE","STATE_DRAG","direction","getAttribute","rectContainer","getBoundingClientRect","rectContent","isAbsolute","position","top","left","limit","absolute","minTop","minLeft","maxTop","height","maxLeft","width","relative","bottom","right","resetBodyCursor","moving","offset","getResizeOffset","margin","touchAction","transform","end","setTimeout","setOffset","dir","offsetAxis","axis","edge","minEdge","getEdge","maxEdge","getOffsetAxis","edgeName","getDirectionInfo","isPositive","rectContentEdge","positionOffset","EdgeName","directions","_offset","split","directionInfo","$props","$setup","_createBlock","onKeydown","_createVNode","_mergeProps","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave","toString","role","tabindex","onMouseup","_renderSlot","_ctx","_hoisted_1","styleInject","css","insertAt","head","getElementsByTagName","createElement","firstChild","insertBefore","styleSheet","cssText","createTextNode","methods","dynamicModals","beforeOpen","$nextTick","isString","component","id","_toHandlers","on","on_closed","$options","on_beforeOpen","on_opened","opened","slots","slot","_createCommentVNode","innerHTML","defineApi","_modalComponent","args","allSettled","defaultModal","shallowReactive","assign","hide","names","hideAll","map","get","_setDefaultModal","modalComponent","bindApi","_component","defineModal","VueFinalModal","defineContainer","ModalsContainer","_count","_key","_componentName","_dynamicContainerName","defineVfm","_vfm","$vfm","installVfm","App","componentName","dynamicContainerName","defineProperty","config","globalProperties","provide","vfmPlugin","pluginOptions","install","_options"],"mappings":"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"}