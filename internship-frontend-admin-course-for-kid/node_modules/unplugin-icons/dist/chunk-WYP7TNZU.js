"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }



var _chunk6ORDXO2Ejs = require('./chunk-6ORDXO2E.js');



var _chunkGMAU6NZDjs = require('./chunk-GMAU6NZD.js');

// src/index.ts
var _unplugin = require('unplugin');

// src/core/options.ts
var _haspkg = require('has-pkg'); var _haspkg2 = _interopRequireDefault(_haspkg);
async function resolveOptions(options) {
  const {
    scale = 1.2,
    defaultStyle = "",
    defaultClass = "",
    compiler = await guessCompiler(),
    jsx = guessJSX(),
    customCollections = {}
  } = options;
  const webComponents = Object.assign({
    autoDefine: false,
    iconPrefix: "icon"
  }, options.webComponents);
  return {
    scale,
    defaultStyle,
    defaultClass,
    customCollections,
    compiler,
    jsx,
    webComponents
  };
}
async function guessCompiler() {
  return await getVueVersion() || (_haspkg2.default.call(void 0, "@svgr/core") ? "jsx" : "vue3");
}
function guessJSX() {
  if (_haspkg2.default.call(void 0, "preact"))
    return "preact";
  return "react";
}
async function getVueVersion() {
  var _a;
  try {
    const vue = await Promise.resolve().then(() => _chunkGMAU6NZDjs.__toModule.call(void 0, _chunkGMAU6NZDjs.__require.call(void 0, "vue")));
    const version = ((_a = vue == null ? void 0 : vue.default) == null ? void 0 : _a.version) || (vue == null ? void 0 : vue.version) || "3";
    return version.startsWith("2.") ? "vue2" : "vue3";
  } catch (e) {
    return null;
  }
}

// src/index.ts
var unplugin = _unplugin.createUnplugin.call(void 0, (options = {}) => {
  const resolved = resolveOptions(options);
  return {
    name: "unplugin-icons",
    enforce: "pre",
    resolveId(id) {
      if (_chunk6ORDXO2Ejs.isIconPath.call(void 0, id)) {
        const res = _chunk6ORDXO2Ejs.normalizeIconPath.call(void 0, id).replace(/\.\w+$/i, "").replace(/^\//, "");
        const ext = options.compiler === "jsx" ? ".jsx" : options.compiler === "svelte" ? ".svelte" : "";
        return res + ext;
      }
      return null;
    },
    async load(id) {
      const config = await resolved;
      if (_chunk6ORDXO2Ejs.isIconPath.call(void 0, id)) {
        const code = await _chunk6ORDXO2Ejs.generateComponentFromPath.call(void 0, id, config) || null;
        if (code)
          return { code, map: { mappings: "" } };
      }
      return null;
    }
  };
});
var src_default = unplugin;



exports.src_default = src_default;
